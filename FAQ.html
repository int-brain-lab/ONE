<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ &mdash; ONE  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/css/style.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api_reference.html" />
    <link rel="prev" title="Datasets and their types" href="notebooks/datasets_and_types.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ONE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using ONE to access data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="one_reference.html">Introduction to ONE (Open Neurophysiology Environment)</a></li>
<li class="toctree-l1"><a class="reference internal" href="one_installation.html">ONE installation and setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_search/one_search.html">Searching with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_list/one_list.html">Listing with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_load/one_load.html">Loading with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/experiment_ids.html">Experiment IDs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE with Alyx</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_modes.html">ONE API modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/one_advanced/one_advanced.html">ONE REST queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/useful_alyx_queries.html">Useful Alyx REST queries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE to share data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/data_sharing.html">Releasing data with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/recording_data_access.html">Recording data access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ALF</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="alf_intro.html">ALyx Filenames (ALF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/alyx_files.html">Listing Alyx Filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/datasets_and_types.html">Datasets and their types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-release-my-own-data-with-the-one-api">How do I release my own data with the ONE API?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-use-one-without-connecting-to-my-database">How do I use ONE without connecting to my database?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-are-my-recent-data-missing-from-my-cache-but-present-on-alyx">Why are my recent data missing from my cache but present on Alyx?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i-made-a-mistake-during-setup-and-now-can-t-call-setup-how-do-i-fix-it">I made a mistake during setup and now can’t call setup, how do I fix it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-change-my-download-a-k-a-cache-directory">How do I change my download (a.k.a. cache) directory?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-load-cache-tables-from-a-different-location">How do I load cache tables from a different location?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-check-who-i-m-logged-in-as">How do check who I’m logged in as?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-log-out-or-temporarily-log-in-as-someone-else">How do I log out, or temporarily log in as someone else?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-to-do-if-i-am-seeing-a-certificate-error">What to do if I am seeing a certificate error?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-download-the-datasets-cache-for-a-specific-ibl-paper-release">How do I download the datasets cache for a specific IBL paper release?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-check-which-version-of-one-i-m-using-within-python">How do I check which version of ONE I’m using within Python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-use-one-in-a-read-only-environment">How do I use ONE in a read-only environment?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-does-the-search-return-a-lazyid-object">Why does the search return a LazyID object?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-information-about-a-session-from-an-experiment-id">How do I get information about a session from an experiment ID?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-search-for-sessions-with-the-exact-subject-name-excluding-partial-matches">How do I search for sessions with the exact subject name (excluding partial matches)?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-are-my-search-results-inconsistent-and-or-seem-to-change">Why are my search results inconsistent and/or seem to change?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-load-datasets-that-pass-quality-control">How do I load datasets that pass quality control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#contributing-to-code">Contributing to code</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ONE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FAQ</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/FAQ.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Link to this heading"></a></h1>
<section id="how-do-i-release-my-own-data-with-the-one-api">
<h2>How do I release my own data with the ONE API?<a class="headerlink" href="#how-do-i-release-my-own-data-with-the-one-api" title="Link to this heading"></a></h2>
<p>First create a directory of <a class="reference internal" href="notebooks/datasets_and_types.html"><span class="doc std std-doc">ALF datasets</span></a>, generate the
cache tables, then share the directory with others.  See <a class="reference internal" href="notebooks/data_sharing.html"><span class="doc std std-doc">data sharing</span></a>
guide for more information.</p>
</section>
<section id="how-do-i-use-one-without-connecting-to-my-database">
<h2>How do I use ONE without connecting to my database?<a class="headerlink" href="#how-do-i-use-one-without-connecting-to-my-database" title="Link to this heading"></a></h2>
<p>If you temporarily lose access to your Alyx database, you can instantiate ONE in local mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://openalyx.internationalbrainlab.org&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read more about ONE modes <a class="reference internal" href="notebooks/one_modes.html"><span class="doc std std-doc">here</span></a>.</p>
</section>
<section id="why-are-my-recent-data-missing-from-my-cache-but-present-on-alyx">
<h2>Why are my recent data missing from my cache but present on Alyx?<a class="headerlink" href="#why-are-my-recent-data-missing-from-my-cache-but-present-on-alyx" title="Link to this heading"></a></h2>
<p>After new data are acquired it may take time for it to be copied to an online server (it will
be marked as ‘online’ in Alyx).  Once the data is marked as existing and online, it should appear
in the cache tables next time they are generated.  For the IBL Alyx, the ONE cache tables are
re-generated every 6 hours, however by default ONE will only download a new cache once per day.  To
force a download you can run <code class="docutils literal notranslate"><span class="pre">ONE().refresh_cache('remote')</span></code>.  More information, including
increasing refresh frequency, can be found <a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_modes.html#Refreshing-the-cache">here</a>.</p>
<p>Note: There are two different definitions of caches that are used in ONE2:</p>
<ol class="arabic simple">
<li><p>The cache table that stores info about all sessions and their associated datasets.
This is refreshed every night and uploaded to Flatiron and downloaded onto your computer
every 24hr (this is what the datetime object returned as output of the <code class="docutils literal notranslate"><span class="pre">ONE().refresh_cache('remote')</span></code>
command is showing, i.e. when this cache was last updated).
This table is used in all one.search, one.load, one.list functions. When doing
<code class="docutils literal notranslate"><span class="pre">ONE().refresh_cache('remote')</span></code>, you are basically forcing ONE to re-download this table
regardless of when it was last downloaded from Flatiron.</p></li>
<li><p>When running remote queries (anything that uses <code class="docutils literal notranslate"><span class="pre">one.alyx.rest(....)</span></code>),
ONE stores the results of these queries for 24 hours, so that if you
repeatedly make the same query over and over you don’t hit the database
each time but can use the local cached result.
A problem can arise if something on the Alyx database changes in between the same query:</p>
<ul class="simple">
<li><p>For example, at time X a given query returns an empty result (e.g. no histology session for a given subject).
At time X+1, data is registered onto Alyx.
At time X+2, you run the same query again.
Because you had already made the query earlier, ONE uses the local result that
it had previously and displays that there isn’t a histology session.
To circumvent this, use the <code class="docutils literal notranslate"><span class="pre">no_cache=True</span></code> argument in <code class="docutils literal notranslate"><span class="pre">one.alyx.rest(...,</span> <span class="pre">no_cache=True)</span></code> or
the <code class="docutils literal notranslate"><span class="pre">no_cache</span></code> web client context.  More information can be found <a class="reference external" href="https://int-brain-lab.github.io/ONE/notebooks/one_modes.html#REST-caching">here</a>.
Use this only if necessary, as these methods are not optimized.</p></li>
</ul>
</li>
</ol>
</section>
<section id="i-made-a-mistake-during-setup-and-now-can-t-call-setup-how-do-i-fix-it">
<h2>I made a mistake during setup and now can’t call setup, how do I fix it?<a class="headerlink" href="#i-made-a-mistake-during-setup-and-now-can-t-call-setup-how-do-i-fix-it" title="Link to this heading"></a></h2>
<p>Usually you can re-run your setup with the following command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">ONE</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://alyx.example.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="how-do-i-change-my-download-a-k-a-cache-directory">
<h2>How do I change my download (a.k.a. cache) directory?<a class="headerlink" href="#how-do-i-change-my-download-a-k-a-cache-directory" title="Link to this heading"></a></h2>
<p>To <strong>permanently</strong> change the directory, simply re-run the setup routine:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">ONE</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>  <span class="c1"># Re-run setup for default database (takes effect next time you instantiate ONE)</span>
</pre></div>
</div>
<p>When prompted (‘Enter the location of the download cache’) enter the absolute path of the new download location.</p>
<p>To <strong>temporarily</strong> change the download directory, use the cache_dir arg:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>

<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://alyx.example.com&#39;</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;new_download_dir&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>NB</strong>: This will (down)load the cache tables in the newly specified location.  To avoid this, specify the cache table location separately using the <code class="docutils literal notranslate"><span class="pre">tables_dir</span></code> kwarg.</p>
</section>
<section id="how-do-i-load-cache-tables-from-a-different-location">
<h2>How do I load cache tables from a different location?<a class="headerlink" href="#how-do-i-load-cache-tables-from-a-different-location" title="Link to this heading"></a></h2>
<p>By default, the cache tables are in the cache_dir root.  You can load cache tables in a different location in the following two ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>

<span class="c1"># 1. Specify location upon instantiation</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">tables_dir</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;tables_dir&#39;</span><span class="p">)</span>
<span class="c1"># 2. Specify location after instantiation</span>
<span class="n">one</span><span class="o">.</span><span class="n">load_cache</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;tables_dir&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>NB</strong>: Avoid using the same location for different database cache tables: by default ONE will automatically overwrite tables when a newer version is available. To avoid automatic downloading, set <code class="docutils literal notranslate"><span class="pre">mode='local'</span></code>.</p>
</section>
<section id="how-do-check-who-i-m-logged-in-as">
<h2>How do check who I’m logged in as?<a class="headerlink" href="#how-do-check-who-i-m-logged-in-as" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">one</span><span class="o">.</span><span class="n">offline</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">base_url</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="how-do-i-log-out-or-temporarily-log-in-as-someone-else">
<h2>How do I log out, or temporarily log in as someone else?<a class="headerlink" href="#how-do-i-log-out-or-temporarily-log-in-as-someone-else" title="Link to this heading"></a></h2>
<p>To log out:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>

<span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
</pre></div>
</div>
<p>To log in as someone else temporarily:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;other_user&#39;</span><span class="p">,</span> <span class="n">cache_token</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="what-to-do-if-i-am-seeing-a-certificate-error">
<h2>What to do if I am seeing a certificate error?<a class="headerlink" href="#what-to-do-if-i-am-seeing-a-certificate-error" title="Link to this heading"></a></h2>
<p>If you are using the Windows platform, you may see a certificate error when initially trying to connect with ONE. The last few
lines of the traceback should like this:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;C:\Users\User\anaconda3\envs\ONE\lib\urllib\request.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="n">1351</span><span class="p">,</span> <span class="k">in</span> <span class="n">do_open</span>
    <span class="n">raise</span> <span class="n">URLError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="n">urllib</span><span class="p">.</span><span class="n">error</span><span class="p">.</span><span class="n">URLError</span><span class="p">:</span> <span class="p">&lt;</span><span class="n">urlopen</span> <span class="n">error</span> <span class="p">[</span><span class="n">SSL</span><span class="p">:</span> <span class="n">CERTIFICATE_VERIFY_FAILED</span><span class="p">]</span> <span class="n">certificate</span> <span class="n">verify</span> <span class="n">failed</span><span class="p">:</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">get</span> <span class="n">local</span> <span class="n">issuer</span> <span class="n">certificate</span> <span class="p">(</span><span class="n">_ssl</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="n">997</span><span class="p">)&gt;</span>
</pre></div>
</div>
<p>This has a relatively easy fix:</p>
<ul class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">Microsoft</span> <span class="pre">Edge</span></code> or <code class="docutils literal notranslate"><span class="pre">Internet</span> <span class="pre">Explorer</span></code> and navigate to the URL https://alyx.internationalbrainlab.org, or whichever alyx
site you are attempting to access with ONE (no need to log in)</p></li>
<li><p>Reattempt to run any ONE query or setup on the command line</p>
<ul>
<li><p>Simply visiting the website with a Microsoft web browser should be enough to get the site’s certificate to be stored properly.
This is a unique issue with the way that the Windows OS handles certificates.</p></li>
</ul>
</li>
</ul>
</section>
<section id="how-do-i-download-the-datasets-cache-for-a-specific-ibl-paper-release">
<h2>How do I download the datasets cache for a specific IBL paper release?<a class="headerlink" href="#how-do-i-download-the-datasets-cache-for-a-specific-ibl-paper-release" title="Link to this heading"></a></h2>
<p>You can download cache tables containing datasets with a specific release tag.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>

<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>
<span class="n">TAG</span> <span class="o">=</span> <span class="s1">&#39;2021_Q1_IBL_et_al_Behaviour&#39;</span>  <span class="c1"># Release tag to download cache for</span>
<span class="n">one</span><span class="o">.</span><span class="n">load_cache</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="n">TAG</span><span class="p">)</span>
</pre></div>
</div>
<p>To return to the full cache containing an index of all experiments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ONE</span><span class="o">.</span><span class="n">cache_clear</span><span class="p">()</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="how-do-i-check-which-version-of-one-i-m-using-within-python">
<h2>How do I check which version of ONE I’m using within Python?<a class="headerlink" href="#how-do-i-check-which-version-of-one-i-m-using-within-python" title="Link to this heading"></a></h2>
<p>You can check your version with the following: <code class="docutils literal notranslate"><span class="pre">print(ONE.version)</span></code>.<br />
The latest version can be found in the CHANGELOG, <a class="reference external" href="https://github.com/int-brain-lab/ONE/blob/main/CHANGELOG.md">here</a>. <br />
To update to the latest available version run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">ONE-api</span></code>.</p>
</section>
<section id="how-do-i-use-one-in-a-read-only-environment">
<h2>How do I use ONE in a read-only environment?<a class="headerlink" href="#how-do-i-use-one-in-a-read-only-environment" title="Link to this heading"></a></h2>
<p>To use ONE without any write access or internet access, simply instantiate in local mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">cache_dir</span><span class="o">=</span><span class="s1">&#39;/path/to/data/dir&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">one</span><span class="o">.</span><span class="n">offline</span>
</pre></div>
</div>
<p>If you wish to make Alyx database REST requests in a read-only environment, provide a database URL
and set <code class="docutils literal notranslate"><span class="pre">cache_rest=None</span></code> to avoid saving REST responses on disk:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://openalyx.internationalbrainlab.org&#39;</span><span class="p">,</span> <span class="n">cache_rest</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">one</span><span class="o">.</span><span class="n">offline</span> <span class="ow">and</span> <span class="n">one</span><span class="o">.</span><span class="n">alyx</span><span class="o">.</span><span class="n">cache_mode</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
<section id="why-does-the-search-return-a-lazyid-object">
<h2>Why does the search return a LazyID object?<a class="headerlink" href="#why-does-the-search-return-a-lazyid-object" title="Link to this heading"></a></h2>
<p>When in remote mode using one.search or one.search_insertions, a LazyID object is returned instead of a list.
It behaves exactly the same as a list (you can index, slice and get its length).  Instead of retrieving all the
values from the database query it will fetch only the items you index from the list.  This greatly speeds up
the function when there are large search results.</p>
</section>
<section id="how-do-i-get-information-about-a-session-from-an-experiment-id">
<h2>How do I get information about a session from an experiment ID?<a class="headerlink" href="#how-do-i-get-information-about-a-session-from-an-experiment-id" title="Link to this heading"></a></h2>
<p>You can fetch a dictionary of experiment details from an experiment ID using the <code class="docutils literal notranslate"><span class="pre">get_details</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">details</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span><span class="o">.</span><span class="n">get_details</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="how-do-i-search-for-sessions-with-the-exact-subject-name-excluding-partial-matches">
<h2>How do I search for sessions with the exact subject name (excluding partial matches)?<a class="headerlink" href="#how-do-i-search-for-sessions-with-the-exact-subject-name-excluding-partial-matches" title="Link to this heading"></a></h2>
<p>When not in remote mode you can use a <a class="reference internal" href="#notebooks/one_search/one_search.html#Advanced-searching"><span class="xref myst">regular expression</span></a>
to assert the start and end of the search string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">wildcards</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Should be True by default</span>
<span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;FD_04&#39;</span>
<span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;^</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s1">$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When in remote mode you can use a <a class="reference internal" href="#notebooks/useful_alyx_queries.html#exact"><span class="xref myst">Django exact query</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;remote&#39;</span><span class="p">)</span>
<span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;FD_04&#39;</span>
<span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">django</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;subject__nickname__exact,</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="why-are-my-search-results-inconsistent-and-or-seem-to-change">
<h2>Why are my search results inconsistent and/or seem to change?<a class="headerlink" href="#why-are-my-search-results-inconsistent-and-or-seem-to-change" title="Link to this heading"></a></h2>
<p>This may be caused by one of two things:</p>
<p>First, each day when connecting to the database you download an updated cache table. The data on the database
may simply have changed, or you are loading a different cache table from somewhere. This may be because you
are connecting to a different database (check <code class="docutils literal notranslate"><span class="pre">one.alyx.base_url</span></code>), providing a different cache location (check <code class="docutils literal notranslate"><span class="pre">one._tables_dir</span></code>),
or provided a different tag (see <a class="reference internal" href="#how-do-i-download-the-datasets-cache-for-a-specific-ibl-paper-release"><span class="std std-ref">this question</span></a>).</p>
<p>Second, there are minor differences between the default/local modes and remote mode. Namely that in remote mode
queries are generally case-insensitive.  See the ‘gotcha’ section of
‘<a class="reference internal" href="#notebooks/one_search/one_search.html#Gotchas"><span class="xref myst">Searching with ONE</span></a>’ for more information.</p>
</section>
<section id="how-do-i-load-datasets-that-pass-quality-control">
<h2>How do I load datasets that pass quality control<a class="headerlink" href="#how-do-i-load-datasets-that-pass-quality-control" title="Link to this heading"></a></h2>
<p>You can first filter sessions by those that the supplied datasets with QC level WARNING or less:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">()</span>
<span class="c1"># In local and auto mode</span>
<span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;trials&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">],</span> <span class="n">dataset_qc_lte</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">)</span>
<span class="c1"># In remote mode</span>
<span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">datasets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;trials.table.pqt&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes.times.npy&#39;</span><span class="p">],</span> <span class="n">dataset_qc_lte</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then load the datasets with list_datasets and load_datasets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dsets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">qc</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">,</span> <span class="n">ignore_qc_not_set</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">data</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">dsets</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="notebooks/datasets_and_types.html" class="btn btn-neutral float-left" title="Datasets and their types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_reference.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, International Brain Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>