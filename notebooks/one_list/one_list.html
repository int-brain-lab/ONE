<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Listing with ONE &mdash; ONE  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Loading with ONE" href="../one_load/one_load.html" />
    <link rel="prev" title="Searching with ONE" href="../one_search/one_search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ONE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using ONE to access data</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../one_reference.html">Introduction to ONE (Open Neurophysiology Environment)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../one_installation.html">ONE installation and setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../one_search/one_search.html">Searching with ONE</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Listing with ONE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Filtering-lists">Filtering lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Combining-with-load-methods">Combining with load methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Listing-aggregate-datasets">Listing aggregate datasets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../one_load/one_load.html">Loading with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiment_ids.html">Experiment IDs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE with Alyx</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../one_modes.html">ONE API modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../one_advanced/one_advanced.html">ONE REST queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../useful_alyx_queries.html">Useful Alyx REST queries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE to share data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data_sharing.html">Releasing data with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recording_data_access.html">Recording data access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ALF</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../alf_intro.html">ALyx Filenames (ALF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alyx_files.html">Listing Alyx Filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets_and_types.html">Datasets and their types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ONE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Listing with ONE</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/notebooks/one_list/one_list.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <a href="one_list.ipynb"><button id="download">Download tutorial notebook</button></a>
<a href="https://github.com/int-brain-lab/ONE/tree/main/docs/notebooks/one_list/
one_list.ipynb"><button id="github">Github link</button></a><section id="Listing-with-ONE">
<h1>Listing with ONE<a class="headerlink" href="#Listing-with-ONE" title="Link to this heading"></a></h1>
<p>ONE contains a number of list methods that can be used to explore the datasets available.</p>
<p>To list all available datasets we can use</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">one.api</span> <span class="kn">import</span> <span class="n">ONE</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">ONE</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;https://openalyx.internationalbrainlab.org&#39;</span><span class="p">)</span>

<span class="c1"># All datasets in the database</span>
<span class="n">dsets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note.</p>
<p>Calling <a href="#id1"><span class="problematic" id="id2">list_</span></a>* methods with no arguments in remote mode will not hit the database</p>
</div>
<p>If you are connected to a database (e.g not using ONE with a local cache directory) you can find out information about a specific dataset by typing,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">one</span><span class="o">.</span><span class="n">describe_dataset</span><span class="p">(</span><span class="n">dsets</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
contrast of left-side stimulus (0...1) nan if trial is on other side
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;id&#39;: &#39;979f9f7c-7d67-48d5-9042-a9000a8e66a2&#39;,
 &#39;name&#39;: &#39;trials.contrastLeft&#39;,
 &#39;created_by&#39;: None,
 &#39;description&#39;: &#39;contrast of left-side stimulus (0...1) nan if trial is on other side&#39;,
 &#39;filename_pattern&#39;: &#39;*trials.contrastLeft.*&#39;}
</pre></div></div>
</div>
<p>To find the datasets associated with a specific experiment we can pass in an eid argument</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">eid</span> <span class="o">=</span> <span class="s1">&#39;KS023/2019-12-10/001&#39;</span>

<span class="c1"># All datasets for specific session</span>
<span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;alf/_ibl_bodyCamera.times.npy&#39;,
 &#39;alf/_ibl_leftCamera.times.npy&#39;,
 &#39;alf/_ibl_rightCamera.times.npy&#39;,
 &#39;alf/_ibl_trials.choice.npy&#39;,
 &#39;alf/_ibl_trials.contrastLeft.npy&#39;,
 &#39;alf/_ibl_trials.contrastRight.npy&#39;,
 &#39;alf/_ibl_trials.feedbackType.npy&#39;,
 &#39;alf/_ibl_trials.feedback_times.npy&#39;,
 &#39;alf/_ibl_trials.firstMovement_times.npy&#39;,
 &#39;alf/_ibl_trials.goCueTrigger_times.npy&#39;,
 &#39;alf/_ibl_trials.goCue_times.npy&#39;,
 &#39;alf/_ibl_trials.intervals.npy&#39;,
 &#39;alf/_ibl_trials.intervals_bpod.npy&#39;,
 &#39;alf/_ibl_trials.itiDuration.npy&#39;,
 &#39;alf/_ibl_trials.probabilityLeft.npy&#39;,
 &#39;alf/_ibl_trials.response_times.npy&#39;,
 &#39;alf/_ibl_trials.rewardVolume.npy&#39;,
 &#39;alf/_ibl_trials.stimOff_times.npy&#39;,
 &#39;alf/_ibl_trials.stimOn_times.npy&#39;,
 &#39;alf/_ibl_wheel.position.npy&#39;,
 &#39;alf/_ibl_wheel.times.npy&#39;,
 &#39;alf/_ibl_wheel.timestamps.npy&#39;,
 &#39;alf/_ibl_wheelMoves.intervals.npy&#39;,
 &#39;alf/_ibl_wheelMoves.peakAmplitude.npy&#39;,
 &#39;alf/probe01/_kilosort_whitening.matrix.npy&#39;,
 &#39;alf/probe01/_phy_spikes_subset.channels.npy&#39;,
 &#39;alf/probe01/_phy_spikes_subset.spikes.npy&#39;,
 &#39;alf/probe01/_phy_spikes_subset.waveforms.npy&#39;,
 &#39;alf/probe01/channels.brainLocationIds_ccf_2017.npy&#39;,
 &#39;alf/probe01/channels.localCoordinates.npy&#39;,
 &#39;alf/probe01/channels.mlapdv.npy&#39;,
 &#39;alf/probe01/channels.rawInd.npy&#39;,
 &#39;alf/probe01/clusters.amps.npy&#39;,
 &#39;alf/probe01/clusters.brainLocationAcronyms_ccf_2017.npy&#39;,
 &#39;alf/probe01/clusters.brainLocationIds_ccf_2017.npy&#39;,
 &#39;alf/probe01/clusters.channels.npy&#39;,
 &#39;alf/probe01/clusters.depths.npy&#39;,
 &#39;alf/probe01/clusters.metrics.pqt&#39;,
 &#39;alf/probe01/clusters.mlapdv.npy&#39;,
 &#39;alf/probe01/clusters.peakToTrough.npy&#39;,
 &#39;alf/probe01/clusters.uuids.csv&#39;,
 &#39;alf/probe01/clusters.waveforms.npy&#39;,
 &#39;alf/probe01/clusters.waveformsChannels.npy&#39;,
 &#39;alf/probe01/spikes.amps.npy&#39;,
 &#39;alf/probe01/spikes.clusters.npy&#39;,
 &#39;alf/probe01/spikes.depths.npy&#39;,
 &#39;alf/probe01/spikes.samples.npy&#39;,
 &#39;alf/probe01/spikes.templates.npy&#39;,
 &#39;alf/probe01/spikes.times.npy&#39;,
 &#39;alf/probe01/templates.amps.npy&#39;,
 &#39;alf/probe01/templates.waveforms.npy&#39;,
 &#39;alf/probe01/templates.waveformsChannels.npy&#39;,
 &#39;alf/probes.description.json&#39;,
 &#39;alf/probes.trajectory.json&#39;,
 &#39;raw_behavior_data/_iblrig_ambientSensorData.raw.jsonable&#39;,
 &#39;raw_behavior_data/_iblrig_codeFiles.raw.zip&#39;,
 &#39;raw_behavior_data/_iblrig_encoderEvents.raw.ssv&#39;,
 &#39;raw_behavior_data/_iblrig_encoderPositions.raw.ssv&#39;,
 &#39;raw_behavior_data/_iblrig_encoderTrialInfo.raw.ssv&#39;,
 &#39;raw_behavior_data/_iblrig_taskData.raw.jsonable&#39;,
 &#39;raw_behavior_data/_iblrig_taskSettings.raw.json&#39;,
 &#39;raw_ephys_data/_spikeglx_ephysData_g0_t0.nidq.cbin&#39;,
 &#39;raw_ephys_data/_spikeglx_ephysData_g0_t0.nidq.ch&#39;,
 &#39;raw_ephys_data/_spikeglx_ephysData_g0_t0.nidq.meta&#39;,
 &#39;raw_ephys_data/_spikeglx_ephysData_g0_t0.nidq.wiring.json&#39;,
 &#39;raw_ephys_data/_spikeglx_sync.channels.npy&#39;,
 &#39;raw_ephys_data/_spikeglx_sync.polarities.npy&#39;,
 &#39;raw_ephys_data/_spikeglx_sync.times.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysSpectralDensityAP.freqs.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysSpectralDensityAP.power.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysSpectralDensityLF.freqs.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysSpectralDensityLF.power.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsAP.rms.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsAP.timestamps.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsLF.rms.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsLF.timestamps.npy&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.ap.cbin&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.ap.ch&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.ap.meta&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.lf.cbin&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.lf.ch&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.lf.meta&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.sync.npy&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.timestamps.npy&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_ephysData_g0_t0.imec1.wiring.json&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_sync.channels.probe01.npy&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_sync.polarities.probe01.npy&#39;,
 &#39;raw_ephys_data/probe01/_spikeglx_sync.times.probe01.npy&#39;,
 &#39;raw_video_data/_iblrig_bodyCamera.raw.mp4&#39;,
 &#39;raw_video_data/_iblrig_bodyCamera.timestamps.ssv&#39;,
 &#39;raw_video_data/_iblrig_leftCamera.raw.mp4&#39;,
 &#39;raw_video_data/_iblrig_leftCamera.timestamps.ssv&#39;,
 &#39;raw_video_data/_iblrig_rightCamera.raw.mp4&#39;,
 &#39;raw_video_data/_iblrig_rightCamera.timestamps.ssv&#39;,
 &#39;spike_sorters/ks2_matlab/probe01/_kilosort_raw.output.tar&#39;]
</pre></div></div>
</div>
<p>We can also list the available collections by using,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All collections in database</span>
<span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">()</span>

<span class="c1"># All collections for specific session</span>
<span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;raw_ephys_data/probe01&#39;,
 &#39;alf&#39;,
 &#39;alf/probe01&#39;,
 &#39;raw_video_data&#39;,
 &#39;raw_behavior_data&#39;,
 &#39;raw_ephys_data&#39;,
 &#39;spike_sorters/ks2_matlab/probe01&#39;]
</pre></div></div>
</div>
<p>Revisions can be listed in a similar way,</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All revisions in database</span>
<span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">()</span>

<span class="c1"># All revisions for specific session</span>
<span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The final useful list method allows you to search for subjects in the database,</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All subjects in the database</span>
<span class="n">subjects</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_subjects</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>For more examples of file organization, including the use of dataset revisions, see <a class="reference external" href="../alyx_files">this guide</a>.</p>
<section id="Filtering-lists">
<h2>Filtering lists<a class="headerlink" href="#Filtering-lists" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">list_collections</span></code>, <code class="docutils literal notranslate"><span class="pre">list_revisions</span></code> and <code class="docutils literal notranslate"><span class="pre">list_datasets</span></code> can be called with various filter arguments. Collections and datasets may be filtered using wildcards, or regular expressions when the wildcard flag is set to False. For more information on using wildcards, see the <a class="reference external" href="../one_load/one_load.html#Advanced-loading">ONE load guide</a>.</p>
<p>Below are some examples of filtering with wildcards:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All datasets for specific session in alf/probe01 collection:</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;alf/probe01&#39;</span><span class="p">)</span>

<span class="c1"># All datasets for a specific session in any probe collection:</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;*probe*&#39;</span><span class="p">)</span>

<span class="c1"># All collections that contain datasets with &#39;spikes&#39; in the name:</span>
<span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;*spikes*&#39;</span><span class="p">)</span>

<span class="c1"># All datasets with &#39;raw&#39; in the name:</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;*raw*&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Note that for <code class="docutils literal notranslate"><span class="pre">list_datasets</span></code> and <code class="docutils literal notranslate"><span class="pre">list_collections</span></code> a provided revision name can’t include wildcards.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">list_datasets</span></code>, the resulting list will include only the datasets in the given revision, or the previous revision (alphabetically) if the provided revision doesn’t exist.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">list_collections</span></code>, the resulting list will include only the collections containing the given revision, or the previous revision (alphabetically) if the provided revision doesn’t exist.</p>
<p>For examples, to list collections that start with the word ‘raw’ and contain revisions on or before ‘2020-01-01’</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;raw*&#39;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">list_revisions</span></code>, the provided revision keyword arg works like the collections arg and may include wildcards.</p>
<p>For example, to list revisions for a given session that begin with ‘2020’ or ‘2021’:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s1">&#39;202[01]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The dataset and collection filters may be a list of strings, constituting a logical OR. For example to list datasets containing either ‘spikes’ or ‘clusters’:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;*spikes*&#39;</span><span class="p">,</span> <span class="s1">&#39;*clusters*&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;alf/probe01/_phy_spikes_subset.channels.npy&#39;,
 &#39;alf/probe01/_phy_spikes_subset.spikes.npy&#39;,
 &#39;alf/probe01/_phy_spikes_subset.waveforms.npy&#39;,
 &#39;alf/probe01/clusters.amps.npy&#39;,
 &#39;alf/probe01/clusters.brainLocationAcronyms_ccf_2017.npy&#39;,
 &#39;alf/probe01/clusters.brainLocationIds_ccf_2017.npy&#39;,
 &#39;alf/probe01/clusters.channels.npy&#39;,
 &#39;alf/probe01/clusters.depths.npy&#39;,
 &#39;alf/probe01/clusters.metrics.pqt&#39;,
 &#39;alf/probe01/clusters.mlapdv.npy&#39;,
 &#39;alf/probe01/clusters.peakToTrough.npy&#39;,
 &#39;alf/probe01/clusters.uuids.csv&#39;,
 &#39;alf/probe01/clusters.waveforms.npy&#39;,
 &#39;alf/probe01/clusters.waveformsChannels.npy&#39;,
 &#39;alf/probe01/spikes.amps.npy&#39;,
 &#39;alf/probe01/spikes.clusters.npy&#39;,
 &#39;alf/probe01/spikes.depths.npy&#39;,
 &#39;alf/probe01/spikes.samples.npy&#39;,
 &#39;alf/probe01/spikes.templates.npy&#39;,
 &#39;alf/probe01/spikes.times.npy&#39;]
</pre></div></div>
</div>
<p>Dataset/filename filters can either be a string or a dict of ALF parts, each containing either a string or list of strings. This allows very specific part matching. For example, to filter datasets that have either the ‘intervals’ or ‘timestamps’ attributes, and are npy files:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;timestamps&#39;</span><span class="p">,</span> <span class="s1">&#39;intervals&#39;</span><span class="p">],</span> <span class="s1">&#39;extension&#39;</span><span class="p">:</span> <span class="s1">&#39;npy&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>Out[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;alf/_ibl_trials.intervals.npy&#39;,
 &#39;alf/_ibl_trials.intervals_bpod.npy&#39;,
 &#39;alf/_ibl_wheel.timestamps.npy&#39;,
 &#39;alf/_ibl_wheelMoves.intervals.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsAP.timestamps.npy&#39;,
 &#39;raw_ephys_data/probe01/_iblqc_ephysTimeRmsLF.timestamps.npy&#39;]
</pre></div></div>
</div>
</section>
<section id="Combining-with-load-methods">
<h2>Combining with load methods<a class="headerlink" href="#Combining-with-load-methods" title="Link to this heading"></a></h2>
<p>The list methods are useful in combination with the load methods. For example, the output of the <code class="docutils literal notranslate"><span class="pre">list_datasets</span></code> method can be a direct input of the <code class="docutils literal notranslate"><span class="pre">load_datasets</span></code> method:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;*spikes*&#39;</span><span class="p">,</span> <span class="s1">&#39;*clusters*&#39;</span><span class="p">])</span>
<span class="n">data</span><span class="p">,</span> <span class="n">records</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">datasets</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 3/3.0 [00:02&lt;00:00,  1.02it/s]
</pre></div></div>
</div>
<p>Likewise with collections, for example to load all data within the ‘alf/probe*’ collections:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;alf/probe*&#39;</span><span class="p">)</span>
<span class="c1"># Build a dictionary of collections containing bunches of objects</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">one</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">collections</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;alf/probe01&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
100%|██████████| 3/3.0 [00:03&lt;00:00,  1.09s/it]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dict_keys([&#39;alf/probe01&#39;])
dict_keys([&#39;spikes&#39;, &#39;channels&#39;, &#39;whitening&#39;, &#39;clusters&#39;, &#39;templates&#39;, &#39;spikes_subset&#39;])
</pre></div></div>
</div>
<p>Here we load the spike data for a collection that also contains cluster data</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;clusters*&#39;</span><span class="p">)</span>
<span class="n">spikes</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</section>
<section id="Listing-aggregate-datasets">
<h2>Listing aggregate datasets<a class="headerlink" href="#Listing-aggregate-datasets" title="Link to this heading"></a></h2>
<p>All raw and preprocessed data are stored at the session level, however some datasets are aggregated over a subject, project, or tag (called a ‘relation’). Such datasets are known as aggregates and can be listed and filtered using the <code class="docutils literal notranslate"><span class="pre">list_aggregates</span></code> method. Unlike <code class="docutils literal notranslate"><span class="pre">list_datasets</span></code>, <code class="docutils literal notranslate"><span class="pre">list_aggregates</span></code> always returns a pandas DataFrame object.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note.</p>
<p>NB: This method is only available in ‘remote’ mode.</p>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre><span></span><span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;SWC_043&#39;</span>
<span class="n">subject_aggregates</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_aggregates</span><span class="p">(</span><span class="s1">&#39;subjects&#39;</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../one_search/one_search.html" class="btn btn-neutral float-left" title="Searching with ONE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../one_load/one_load.html" class="btn btn-neutral float-right" title="Loading with ONE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, International Brain Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>