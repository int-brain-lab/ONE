

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>one.api &mdash; ONE  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/css/style.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="one.api.SAVE_ON_DELETE" href="one.api.SAVE_ON_DELETE.html" />
    <link rel="prev" title="one.alf.spec.FULL_SPEC" href="one.alf.spec.FULL_SPEC.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ONE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using ONE to access data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../one_reference.html">Introduction to ONE (Open Neurophysiology Environment)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../one_installation.html">ONE installation and setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_search/one_search.html">Searching with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_list/one_list.html">Listing with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_load/one_load.html">Loading with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/experiment_ids.html">Experiment IDs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE with Alyx</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_modes.html">ONE API modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_advanced/one_advanced.html">ONE REST queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/useful_alyx_queries.html">Useful Alyx REST queries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE to share data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/data_sharing.html">Releasing data with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/recording_data_access.html">Recording data access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ALF</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../alf_intro.html">ALyx Filenames (ALF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/alyx_files.html">Listing Alyx Filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/datasets_and_types.html">Datasets and their types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="one.html">one</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="one.alf.html">one.alf</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">one.api</a><ul>
<li class="toctree-l4"><a class="reference internal" href="one.api.SAVE_ON_DELETE.html">one.api.SAVE_ON_DELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#one.api.ONE"><code class="docutils literal notranslate"><span class="pre">ONE()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#one.api.One"><code class="docutils literal notranslate"><span class="pre">One</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#one.api.OneAlyx"><code class="docutils literal notranslate"><span class="pre">OneAlyx</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="one.converters.html">one.converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.params.html">one.params</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.registration.html">one.registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.remote.html">one.remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.tests.html">one.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.util.html">one.util</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.webclient.html">one.webclient</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ONE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="one.html">one</a></li>
      <li class="breadcrumb-item active">one.api</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/one.api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-one.api">
<span id="one-api"></span><h1>one.api<a class="headerlink" href="#module-one.api" title="Link to this heading">ÔÉÅ</a></h1>
<p>Classes for searching, listing and (down)loading ALyx Files.</p>
<p class="rubric">Module attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="one.api.SAVE_ON_DELETE.html#one.api.SAVE_ON_DELETE" title="one.api.SAVE_ON_DELETE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SAVE_ON_DELETE</span></code></a></p></td>
<td><p>Whether to save modified cache tables on delete.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.api.ONE" title="one.api.ONE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ONE</span></code></a></p></td>
<td><p>ONE API factory.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.api.One" title="one.api.One"><code class="xref py py-obj docutils literal notranslate"><span class="pre">One</span></code></a></p></td>
<td><p>An API for searching and loading data on a local filesystem.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.api.OneAlyx" title="one.api.OneAlyx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OneAlyx</span></code></a></p></td>
<td><p>An API for searching and loading data through the Alyx database.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="one.api.ONE">
<span class="sig-name descname"><span class="pre">ONE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'remote'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wildcards</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#ONE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.ONE" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>ONE API factory.</p>
<p>Determine which class to instantiate depending on parameters passed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<em>str</em>) ‚Äì Query mode, options include ‚Äòlocal‚Äô (offline) and ‚Äòremote‚Äô (online only).  Most
methods have a <cite>query_type</cite> parameter that can override the class mode.</p></li>
<li><p><strong>wildcards</strong> (<em>bool</em>) ‚Äì If true all methods use unix shell style pattern matching, otherwise regular expressions
are used.</p></li>
<li><p><strong>cache_dir</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì Path to the data files.  If Alyx parameters have been set up for this location,
an OneAlyx instance is returned.  If data_dir and base_url are None, the default
location is used.</p></li>
<li><p><strong>tables_dir</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì An optional location of the cache tables.  If None, the tables are assumed to be in the
cache_dir.</p></li>
<li><p><strong>base_url</strong> (<em>str</em>) ‚Äì An Alyx database URL.  The URL must start with ‚Äòhttp‚Äô.</p></li>
<li><p><strong>username</strong> (<em>str</em>) ‚Äì An Alyx database login username.</p></li>
<li><p><strong>password</strong> (<em>str</em>) ‚Äì An Alyx database password.</p></li>
<li><p><strong>cache_rest</strong> (<em>str</em>) ‚Äì If not in ‚Äòlocal‚Äô mode, this determines which http request types to cache.  Default is
‚ÄòGET‚Äô.  Use None to deactivate cache (not recommended).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An One instance if mode is ‚Äòlocal‚Äô, otherwise an OneAlyx instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#one.api.One" title="one.api.One">One</a>, <a class="reference internal" href="#one.api.OneAlyx" title="one.api.OneAlyx">OneAlyx</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="one.api.One">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">One</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'local'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wildcards</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="one.converters.html#one.converters.ConversionMixin" title="one.converters.ConversionMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConversionMixin</span></code></a></p>
<p>An API for searching and loading data on a local filesystem.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="one.api.One.uuid_filenames">
<span class="sig-name descname"><span class="pre">uuid_filenames</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#one.api.One.uuid_filenames" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>whether datasets on disk have a UUID in their filename.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="one.api.One.offline">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">offline</span></span><a class="headerlink" href="#one.api.One.offline" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>True if mode is local or no Web client set.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.search_terms">
<span class="sig-name descname"><span class="pre">search_terms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.search_terms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.search_terms" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>List the search term keyword args for use in the search method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_cache">
<span class="sig-name descname"><span class="pre">load_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.load_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_cache" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load parquet cache files from a local directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tables_dir</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì An optional directory location of the parquet files, defaults to One._tables_dir.</p></li>
<li><p><strong>clobber</strong> (<em>bool</em>) ‚Äì If true, the cache is loaded without merging with existing table files.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A timestamp of when the cache was loaded.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datetime.datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.save_cache">
<span class="sig-name descname"><span class="pre">save_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.save_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.save_cache" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Save One._cache attribute into parquet tables if recently modified.</p>
<p>Checks if another process is writing to file, if so waits before saving.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_dir</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì The directory path into which the tables are saved.  Defaults to cache directory.</p></li>
<li><p><strong>clobber</strong> (<em>bool</em>) ‚Äì If true, the cache is saved without merging with existing table files, regardless of
modification time.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.save_loaded_ids">
<span class="sig-name descname"><span class="pre">save_loaded_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sessions_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.save_loaded_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.save_loaded_ids" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Save list of UUIDs corresponding to datasets or sessions where datasets were loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sessions_only</strong> (<em>bool</em>) ‚Äì If true, save list of experiment IDs, otherwise the full list of dataset IDs.</p></li>
<li><p><strong>clear_list</strong> (<em>bool</em>) ‚Äì If true, clear the current list of loaded dataset IDs after saving.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of str</em> ‚Äì List of UUIDs.</p></li>
<li><p><em>pathlib.Path</em> ‚Äì The file path of the saved list.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.search" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches sessions matching the given criteria and returns a list of matching eids.</p>
<p>For a list of search terms, use the method</p>
<blockquote>
<div><p>one.search_terms()</p>
</div></blockquote>
<p>For all search parameters, a single value or list may be provided.  For <cite>dataset</cite>, the
sessions returned will contain all listed datasets.  For the other parameters, the session
must contain at least one of the entries.</p>
<p>For all but <cite>date_range</cite> and <cite>number</cite>, any field that contains the search string is
returned.  Wildcards are not permitted, however if wildcards property is True, regular
expressions may be used (see notes and examples).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datasets</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì One or more (exact) dataset names. Returns sessions containing all of these datasets.</p></li>
<li><p><strong>dataset_qc_lte</strong> (<em>str</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="one.alf.spec.html#one.alf.spec.QC" title="one.alf.spec.QC"><em>one.alf.spec.QC</em></a>) ‚Äì A dataset QC value, returns sessions with datasets at or below this QC value, including
those with no QC set.  If <cite>dataset</cite> not passed, sessions with any passing QC datasets
are returned, otherwise all matching datasets must have the QC value or below.</p></li>
<li><p><strong>date_range</strong> (<em>str</em><em>, </em><em>list</em><em>, </em><em>datetime.datetime</em><em>, </em><em>datetime.date</em><em>, </em><em>pandas.timestamp</em>) ‚Äì A single date to search or a list of 2 dates that define the range (inclusive).  To
define only the upper or lower date bound, set the other element to None.</p></li>
<li><p><strong>lab</strong> (<em>str</em>) ‚Äì A str or list of lab names, returns sessions from any of these labs.</p></li>
<li><p><strong>number</strong> (<em>str</em><em>, </em><em>int</em>) ‚Äì Number of session to be returned, i.e. number in sequence for a given date.</p></li>
<li><p><strong>subject</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì A list of subject nicknames, returns sessions for any of these subjects.</p></li>
<li><p><strong>task_protocol</strong> (<em>str</em>) ‚Äì The task protocol name (can be partial, i.e. any task protocol containing that str
will be found).</p></li>
<li><p><strong>projects</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The project name(s) (can be partial, i.e. any project containing that str
will be found).</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true also returns a dict of dataset details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of UUID</em> ‚Äì A list of eids.</p></li>
<li><p><em>(list)</em> ‚Äì (If details is True) a list of dictionaries, each entry corresponding to a matching
session.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Search for sessions with ‚Äòtraining‚Äô in the task protocol.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;training&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for sessions by subject ‚ÄòMFD_04‚Äô.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;MFD_04&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do an exact search for sessions by subject ‚ÄòFD_04‚Äô.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">one</span><span class="o">.</span><span class="n">wildcards</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;the wildcards flag must be True for regex expressions&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;^FD_04$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for sessions on a given date, in a given lab, containing trials and spike data.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">date</span><span class="o">=</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span> <span class="n">lab</span><span class="o">=</span><span class="s1">&#39;churchlandlab&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">datasets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;trials.table.pqt&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes.times.npy&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Search for sessions containing trials and spike data where QC for both are WARNING or less.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">dataset_qc_lte</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;trials&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Search for sessions with any datasets that have a QC of PASS or NOT_SET.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">dataset_qc_lte</span><span class="o">=</span><span class="s1">&#39;PASS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>In default and local mode, most queries are case-sensitive partial matches. When lists
are provided, the search is a logical OR, except for <cite>datasets</cite>, which is a logical AND.</p></li>
<li><p>If <cite>dataset_qc</cite> and <cite>datasets</cite> are defined, the QC criterion only applies to the provided
datasets and all must pass for a session to be returned.</p></li>
<li><p>All search terms are true for a session to be returned, i.e. subject matches AND project
matches, etc.</p></li>
<li><p>In remote mode most queries are case-insensitive partial matches.</p></li>
<li><p>In default and local mode, when the one.wildcards flag is True (default), queries are
interpreted as regular expressions. To turn this off set one.wildcards to False.</p></li>
<li><p>In remote mode regular expressions are only supported using the <cite>django</cite> argument.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.get_details">
<span class="sig-name descname"><span class="pre">get_details</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.get_details"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.get_details" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return session details for a given session ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>full</strong> (<em>bool</em>) ‚Äì If True, returns a DataFrame of session and dataset info</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A session record or full DataFrame with dataset information if full is True</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series, pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.list_subjects">
<span class="sig-name descname"><span class="pre">list_subjects</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/one/api.html#One.list_subjects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.list_subjects" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>List all subjects in database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sorted list of subject names</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.list_datasets">
<span class="sig-name descname"><span class="pre">list_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">QC.FAIL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_qc_not_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_revisions_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_eid_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.list_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.list_datasets" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given an eid, return the datasets for those sessions.</p>
<p>If no eid is provided, a list of all datasets is returned.  When details is false, a sorted
array of unique datasets is returned (their relative paths).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the ones matching the filename.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>collection</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The collection to which the object belongs, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì Filters datasets and returns only the ones matching the revision.
Supports asterisks as wildcards.</p></li>
<li><p><strong>qc</strong> (<em>str</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="one.alf.spec.html#one.alf.spec.QC" title="one.alf.spec.QC"><em>one.alf.spec.QC</em></a>) ‚Äì Returns datasets at or below this QC level.  Integer values should correspond to the QC
enumeration NOT the qc category column codes in the pandas table.</p></li>
<li><p><strong>ignore_qc_not_set</strong> (<em>bool</em>) ‚Äì When true, do not return datasets for which QC is NOT_SET.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì When true, a pandas DataFrame is returned, otherwise a numpy array of
relative paths (collection/revision/filename) - see one.alf.spec.describe for details.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
<li><p><strong>default_revisions_only</strong> (<em>bool</em>) ‚Äì When true, only matching datasets that are considered default revisions are returned.
If no ‚Äòdefault_revision‚Äô column is present, and ALFError is raised.</p></li>
<li><p><strong>keep_eid_index</strong> (<em>bool</em>) ‚Äì If details is true, this determines whether the returned data frame contains the eid
in the index. When false (default) the returned data frame index is the dataset id
only, otherwise the index is a MultIndex with levels (eid, id).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Slice of datasets table or numpy array if details is False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray, pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>List all unique datasets in ONE cache</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">()</span>
</pre></div>
</div>
<p>List all datasets for a given experiment</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
<p>List all datasets for an experiment that match a collection name</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">probe_datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;*probe*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List datasets for an experiment that have ‚Äòwheel‚Äô in the filename</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;*wheel*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List datasets for an experiment that are part of a ‚Äòwheel‚Äô or ‚Äòtrial(s)‚Äô object</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;wheel&#39;</span><span class="p">,</span> <span class="s1">&#39;trial?&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.list_collections">
<span class="sig-name descname"><span class="pre">list_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.list_collections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.list_collections" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>List the collections for a given experiment.</p>
<p>If no experiment ID is given, all collections are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>[</em><em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em><em>]</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the collections containing matching datasets.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>collection</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì Filter by a given pattern. Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì Filters collections and returns only the ones with the matching revision.
Supports asterisks as wildcards</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true a dict of pandas datasets tables is returned with collections as keys,
otherwise a numpy array of unique collections</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of unique collections or dict of datasets tables</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list, dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>List all unique collections in ONE cache</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">()</span>
</pre></div>
</div>
<p>List all collections for a given experiment</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
<p>List all collections for a given experiment and revision</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">revised</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List all collections that have ‚Äòprobe‚Äô in the name.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;*probe*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List collections for an experiment that have datasets with ‚Äòwheel‚Äô in the name</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;*wheel*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List collections for an experiment that contain numpy datasets</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;extension&#39;</span><span class="p">:</span> <span class="s1">&#39;npy&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.list_revisions">
<span class="sig-name descname"><span class="pre">list_revisions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.list_revisions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.list_revisions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>List the revisions for a given experiment.</p>
<p>If no experiment id is given, all collections are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the revisions containing matching datasets.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>collection</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì Filter by a given collection. Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì Filter by a given pattern. Supports asterisks as wildcards.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true a dict of pandas datasets tables is returned with collections as keys,
otherwise a numpy array of unique collections.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of unique collections or dict of datasets tables.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list, dict</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>List all revisions in ONE cache</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">()</span>
</pre></div>
</div>
<p>List all revisions for a given experiment</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
<p>List all revisions for a given experiment that contain the trials object</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="s1">&#39;trials&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>List all revisions for a given experiment that start with 2020 or 2021</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">revisions</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_revisions</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;202[01]*&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_object">
<span class="sig-name descname"><span class="pre">load_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="one.alf.io.html#one.alf.io.AlfBunch" title="one.alf.io.AlfBunch"><span class="pre">AlfBunch</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath"><span class="pre">ALFPath</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/one/api.html#One.load_object"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_object" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load all attributes of an ALF object from a Session ID and an object name.</p>
<p>Any datasets with matching object name will be loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>obj</strong> (<em>str</em>) ‚Äì The ALF object to load.  Supports asterisks as wildcards.</p></li>
<li><p><strong>collection</strong> (<em>str</em>) ‚Äì The collection to which the object belongs, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì The dataset revision (typically an ISO date).  If no exact match, the previous
revision (ordered lexicographically) is returned.  If None, the default revision is
returned (usually the most recent revision).  Regular expressions/wildcards not
permitted.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì When true the data are downloaded and the file path is returned. NB: The order of the
file path list is undefined.</p></li>
<li><p><strong>check_hash</strong> (<em>bool</em>) ‚Äì Consider dataset missing if local file hash does not match. In online mode, the dataset
will be re-downloaded.</p></li>
<li><p><strong>kwargs</strong> ‚Äì Additional filters for datasets, including namespace and timescale. For full list
see the <a class="reference internal" href="one.alf.spec.html#one.alf.spec.describe" title="one.alf.spec.describe"><code class="xref py py-func docutils literal notranslate"><span class="pre">one.alf.spec.describe()</span></code></a> function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An ALF bunch or if download_only is True, a list of one.alf.path.ALFPath objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="one.alf.io.html#one.alf.io.AlfBunch" title="one.alf.io.AlfBunch">one.alf.io.AlfBunch</a>, list</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;moves&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;trials&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;*probe01&#39;</span><span class="p">)</span>  <span class="c1"># wildcards is True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;.*probe01&#39;</span><span class="p">)</span>  <span class="c1"># wildcards is False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;ibl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">timescale</span><span class="o">=</span><span class="s1">&#39;ephysClock&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Load specific attributes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">load_object</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;times*&#39;</span><span class="p">,</span> <span class="s1">&#39;clusters&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_dataset">
<span class="sig-name descname"><span class="pre">load_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.load_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_dataset" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load a single dataset for a given session id and dataset name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>dataset</strong> (<em>str</em><em>, </em><em>dict</em>) ‚Äì The ALF dataset to load.  May be a string or dict of ALF parts.  Supports asterisks as
wildcards.</p></li>
<li><p><strong>collection</strong> (<em>str</em>) ‚Äì The collection to which the object belongs, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì The dataset revision (typically an ISO date).  If no exact match, the previous
revision (ordered lexicographically) is returned.  If None, the default revision is
returned (usually the most recent revision).  Regular expressions/wildcards not
permitted.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô)</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì When true the data are downloaded and the file path is returned.</p></li>
<li><p><strong>check_hash</strong> (<em>bool</em>) ‚Äì Consider dataset missing if local file hash does not match. In online mode, the dataset
will be re-downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset or a ALFPath object if download_only is true.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray, <a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath">one.alf.path.ALFPath</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;_ibl_trials.intervals.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Load dataset without specifying extension</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;trials.intervals&#39;</span><span class="p">)</span>  <span class="c1"># wildcard mode only</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;.*trials.intervals.*&#39;</span><span class="p">)</span>  <span class="c1"># regex mode only</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="s1">&#39;trials&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="s1">&#39;intervals&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;_ibl_trials.intervals.npy&#39;</span><span class="p">,</span> <span class="n">download_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spike_times</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes.times.npy&#39;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;alf/probe01&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_spikes</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;spikes.times.npy&#39;</span><span class="p">,</span>
<span class="gp">... </span>                              <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;alf/probe01&#39;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="s1">&#39;2020-08-31&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_spikes</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;alf/probe01/#2020-08-31#/spikes.times.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> ‚Äì When a relative paths is provided (e.g. ‚Äòcollection/#revision#/object.attribute.ext‚Äô),
    the collection and revision keyword arguments must be None.</p></li>
<li><p><a class="reference internal" href="one.alf.exceptions.html#one.alf.exceptions.ALFObjectNotFound" title="one.alf.exceptions.ALFObjectNotFound"><strong>one.alf.exceptions.ALFObjectNotFound</strong></a> ‚Äì The dataset was not found in the cache or on disk.</p></li>
<li><p><a class="reference internal" href="one.alf.exceptions.html#one.alf.exceptions.ALFMultipleCollectionsFound" title="one.alf.exceptions.ALFMultipleCollectionsFound"><strong>one.alf.exceptions.ALFMultipleCollectionsFound</strong></a> ‚Äì The dataset provided exists in multiple collections or matched multiple different
    files. Provide a specific collection to load, and make sure any wildcard/regular
    expressions are specific enough.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>UserWarning</dt><dd><p>When a relative paths is provided (e.g. ‚Äòcollection/#revision#/object.attribute.ext‚Äô),
wildcards/regular expressions must not be used. To use wildcards, pass the collection
and revision as separate keyword arguments.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_datasets">
<span class="sig-name descname"><span class="pre">load_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collections</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revisions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assert_present</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.load_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_datasets" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load datasets for a given session id.</p>
<p>Returns two lists the length of datasets.  The first is the data (or file paths if
download_data is false), the second is a list of meta data Bunches.  If assert_present is
false, missing data will be returned as None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>datasets</strong> (<em>list</em><em> of </em><em>strings</em>) ‚Äì The ALF datasets to load.  May be a string or dict of ALF parts.  Supports asterisks
as wildcards.</p></li>
<li><p><strong>collections</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The collection(s) to which the object(s) belong, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>revisions</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The dataset revision (typically an ISO date).  If no exact match, the previous
revision (ordered lexicographically) is returned.  If None, the default revision is
returned (usually the most recent revision).  Regular expressions/wildcards not
permitted.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô)</p></li>
<li><p><strong>assert_present</strong> (<em>bool</em>) ‚Äì If true, missing datasets raises and error, otherwise None is returned</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì When true the data are downloaded and the file path is returned.</p></li>
<li><p><strong>check_hash</strong> (<em>bool</em>) ‚Äì Consider dataset missing if local file hash does not match. In online mode, the dataset
will be re-downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list</em> ‚Äì A list of data (or file paths) the length of datasets.</p></li>
<li><p><em>list</em> ‚Äì A list of meta data Bunches. If assert_present is False, missing data will be None.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>There are three ways the datasets may be formatted: the object.attribute; the file name
(including namespace and extension); the ALF components as a dict; the dataset path,
relative to the session path, e.g. collection/object.attribute.ext.</p></li>
<li><p>When relative paths are provided (e.g. ‚Äòcollection/#revision#/object.attribute.ext‚Äô),
wildcards/regular expressions must not be used. To use wildcards, pass the collection and
revision as separate keyword arguments.</p></li>
<li><p>To ensure you are loading the correct revision, use the revisions kwarg instead of
relative paths.</p></li>
<li><p>To load an exact revision (i.e. not the last revision before a given date), pass in
a list of relative paths or a data frame.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> ‚Äì When a relative paths is provided (e.g. ‚Äòcollection/#revision#/object.attribute.ext‚Äô),
    the collection and revision keyword arguments must be None.</p></li>
<li><p><strong>ValueError</strong> ‚Äì If a list of collections or revisions are provided, they must match the number of
    datasets passed in.</p></li>
<li><p><strong>TypeError</strong> ‚Äì The datasets argument must be a non-string iterable.</p></li>
<li><p><a class="reference internal" href="one.alf.exceptions.html#one.alf.exceptions.ALFObjectNotFound" title="one.alf.exceptions.ALFObjectNotFound"><strong>one.alf.exceptions.ALFObjectNotFound</strong></a> ‚Äì One or more of the datasets was not found in the cache or on disk.  To suppress this
    error and return None for missing datasets, use assert_present=False.</p></li>
<li><p><a class="reference internal" href="one.alf.exceptions.html#one.alf.exceptions.ALFMultipleCollectionsFound" title="one.alf.exceptions.ALFMultipleCollectionsFound"><strong>one.alf.exceptions.ALFMultipleCollectionsFound</strong></a> ‚Äì One or more of the dataset(s) provided exist in multiple collections. Provide the
    specific collections to load, and if using wildcards/regular expressions, make sure
    the expression is specific enough.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>UserWarning</dt><dd><p>When providing a list of relative dataset paths, this warning occurs if one or more
of the datasets are not marked as default revisions.  Avoid such warnings by explicitly
passing in the required revisions with the revisions keyword argument.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_dataset_from_id">
<span class="sig-name descname"><span class="pre">load_dataset_from_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../_modules/one/api.html#One.load_dataset_from_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_dataset_from_id" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load a dataset given a dataset UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dset_id</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) ‚Äì A dataset UUID to load.</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì If true the dataset is downloaded (if necessary) and the filepath returned.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true a pandas Series is returned in addition to the data.</p></li>
<li><p><strong>check_hash</strong> (<em>bool</em>) ‚Äì Consider dataset missing if local file hash does not match. In online mode, the dataset
will be re-downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset data (or filepath if download_only) and dataset record if details is True.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray, <a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath">one.alf.path.ALFPath</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.load_collection">
<span class="sig-name descname"><span class="pre">load_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">UUID</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_hash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Bunch</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath"><span class="pre">ALFPath</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/one/api.html#One.load_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.load_collection" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load all objects in an ALF collection from a Session ID.</p>
<p>Any datasets with matching object name(s) will be loaded.  Returns a bunch of objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>collection</strong> (<em>str</em>) ‚Äì The collection to which the object belongs, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>object</strong> (<em>str</em>) ‚Äì The ALF object to load.  Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì The dataset revision (typically an ISO date).  If no exact match, the previous
revision (ordered lexicographically) is returned.  If None, the default revision is
returned (usually the most recent revision).  Regular expressions/wildcards not
permitted.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô)</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì When true the data are downloaded and the file path is returned.</p></li>
<li><p><strong>check_hash</strong> (<em>bool</em>) ‚Äì Consider dataset missing if local file hash does not match. In online mode, the dataset
will be re-downloaded.</p></li>
<li><p><strong>kwargs</strong> ‚Äì Additional filters for datasets, including namespace and timescale. For full list
see the one.alf.spec.describe function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Bunch of objects or if download_only is True, a list of ALFPath objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Bunch of <a class="reference internal" href="one.alf.io.html#one.alf.io.AlfBunch" title="one.alf.io.AlfBunch">one.alf.io.AlfBunch</a>, list of <a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath">one.alf.path.ALFPath</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alf_collection</span> <span class="o">=</span> <span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;alf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;*probe01&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;spikes&#39;</span><span class="p">,</span> <span class="s1">&#39;clusters&#39;</span><span class="p">])</span>  <span class="c1"># wildcards is True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">load_collection</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">download_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Base session dir</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alferr.ALFError</strong> ‚Äì No datasets exist for the provided session collection.</p></li>
<li><p><strong>alferr.ALFObjectNotFound</strong> ‚Äì No datasets match the object, attribute or revision filters for this collection.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.One.setup">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#One.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.One.setup" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up One cache tables for a given data directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_dir</strong> (<em>pathlib.Path</em><em>, </em><em>str</em>) ‚Äì A path to the ALF data directory.</p></li>
<li><p><strong>silent</strong> (<em>(</em><em>False</em><em>) </em><em>bool</em>) ‚Äì When True will prompt for cache_dir, if cache_dir is None, and overwrite cache if any.
When False will use cwd for cache_dir, if cache_dir is None, and use existing cache.</p></li>
<li><p><strong>kwargs</strong> ‚Äì Optional arguments to pass to one.alf.cache.make_parquet_db.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of One for the provided cache directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#one.api.One" title="one.api.One">One</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="one.api.OneAlyx">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OneAlyx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'remote'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wildcards</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tables_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#one.api.One" title="one.api.One"><code class="xref py py-class docutils literal notranslate"><span class="pre">One</span></code></a></p>
<p>An API for searching and loading data through the Alyx database.</p>
<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.load_cache">
<span class="sig-name descname"><span class="pre">load_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tables_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clobber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.load_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.load_cache" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load parquet cache files.</p>
<p>Queries the database for the location and creation date of the remote cache.  If newer, it
will be download and loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tables_dir</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì An optional directory location of the parquet files, defaults to One._tables_dir.</p></li>
<li><p><strong>clobber</strong> (<em>bool</em>) ‚Äì If True, query Alyx for a newer cache even if current (local) cache is recent.</p></li>
<li><p><strong>tag</strong> (<em>str</em>) ‚Äì An optional Alyx dataset tag for loading cache tables containing a subset of datasets.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A timestamp of when the cache was loaded.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datetime.datetime</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>To load the cache tables for a given release tag
&gt;&gt;&gt; one.load_cache(tag=‚Äô2022_Q2_IBL_et_al_RepeatedSite‚Äô)</p>
<p>To reset the cache tables after loading a tag
&gt;&gt;&gt; ONE.cache_clear()
‚Ä¶ one = ONE()</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="one.api.OneAlyx.alyx">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">alyx</span></span><a class="headerlink" href="#one.api.OneAlyx.alyx" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The Alyx Web client.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="one.webclient.html#one.webclient.AlyxClient" title="one.webclient.AlyxClient">one.webclient.AlyxClient</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="one.api.OneAlyx.cache_dir">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_dir</span></span><a class="headerlink" href="#one.api.OneAlyx.cache_dir" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The location of the downloaded file cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pathlib.Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.search_terms">
<span class="sig-name descname"><span class="pre">search_terms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.search_terms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.search_terms" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns a list of search terms to be passed as kwargs to the search method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì If ‚Äòremote‚Äô, the search terms are largely determined by the REST endpoint used.</p></li>
<li><p><strong>endpoint</strong> (<em>str</em>) ‚Äì If ‚Äòremote‚Äô, specify the endpoint to search terms for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of search strings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.describe_dataset">
<span class="sig-name descname"><span class="pre">describe_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.describe_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.describe_dataset" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Print a dataset type description.</p>
<p>NB: This requires an Alyx database connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset_type</strong> (<em>str</em>) ‚Äì A dataset type or dataset name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Alyx dataset type record.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.list_datasets">
<span class="sig-name descname"><span class="pre">list_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">QC.FAIL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_qc_not_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_revisions_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_eid_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.list_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.list_datasets" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given an eid, return the datasets for those sessions.</p>
<p>If no eid is provided, a list of all datasets is returned.  When details is false, a sorted
array of unique datasets is returned (their relative paths).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>filename</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the ones matching the filename.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>collection</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The collection to which the object belongs, e.g. ‚Äòalf/probe01‚Äô.
This is the relative path of the file from the session root.
Supports asterisks as wildcards.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì Filters datasets and returns only the ones matching the revision.
Supports asterisks as wildcards.</p></li>
<li><p><strong>qc</strong> (<em>str</em><em>, </em><em>int</em><em>, </em><a class="reference internal" href="one.alf.spec.html#one.alf.spec.QC" title="one.alf.spec.QC"><em>one.alf.spec.QC</em></a>) ‚Äì Returns datasets at or below this QC level.  Integer values should correspond to the QC
enumeration NOT the qc category column codes in the pandas table.</p></li>
<li><p><strong>ignore_qc_not_set</strong> (<em>bool</em>) ‚Äì When true, do not return datasets for which QC is NOT_SET.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì When true, a pandas DataFrame is returned, otherwise a numpy array of
relative paths (collection/revision/filename) - see one.alf.spec.describe for details.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
<li><p><strong>default_revisions_only</strong> (<em>bool</em>) ‚Äì When true, only matching datasets that are considered default revisions are returned.
If no ‚Äòdefault_revision‚Äô column is present, and ALFError is raised.</p></li>
<li><p><strong>keep_eid_index</strong> (<em>bool</em>) ‚Äì If details is true, this determines whether the returned data frame contains the eid
in the index. When false (default) the returned data frame index is the dataset id
only, otherwise the index is a MultIndex with levels (eid, id).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Slice of datasets table or numpy array if details is False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray, pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>List all unique datasets in ONE cache</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">()</span>
</pre></div>
</div>
<p>List all datasets for a given experiment</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">)</span>
</pre></div>
</div>
<p>List all datasets for an experiment that match a collection name</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">probe_datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s1">&#39;*probe*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List datasets for an experiment that have ‚Äòwheel‚Äô in the filename</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;*wheel*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>List datasets for an experiment that are part of a ‚Äòwheel‚Äô or ‚Äòtrial(s)‚Äô object</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_datasets</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;wheel&#39;</span><span class="p">,</span> <span class="s1">&#39;trial?&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.list_aggregates">
<span class="sig-name descname"><span class="pre">list_aggregates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assert_unique</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.list_aggregates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.list_aggregates" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>List datasets aggregated over a given relation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>relation</strong> (<em>str</em>) ‚Äì The thing over which the data were aggregated, e.g. ‚Äòsubjects‚Äô or ‚Äòtags‚Äô.</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) ‚Äì The ID of the datasets, e.g. for data over subjects this would be lab/subject.</p></li>
<li><p><strong>dataset</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the ones matching the filename.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì Filters datasets and returns only the ones matching the revision.
Supports asterisks as wildcards.</p></li>
<li><p><strong>assert_unique</strong> (<em>bool</em>) ‚Äì When true an error is raised if multiple collections or datasets are found.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The matching aggregate dataset records.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>List datasets aggregated over a specific subject‚Äôs sessions</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trials</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">list_aggregates</span><span class="p">(</span><span class="s1">&#39;subjects&#39;</span><span class="p">,</span> <span class="s1">&#39;SP026&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.load_aggregate">
<span class="sig-name descname"><span class="pre">load_aggregate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.load_aggregate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.load_aggregate" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Load a single aggregated dataset for a given string identifier.</p>
<p>Loads data aggregated over a relation such as subject, project or tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>relation</strong> (<em>str</em>) ‚Äì The thing over which the data were aggregated, e.g. ‚Äòsubjects‚Äô or ‚Äòtags‚Äô.</p></li>
<li><p><strong>identifier</strong> (<em>str</em>) ‚Äì The ID of the datasets, e.g. for data over subjects this would be lab/subject.</p></li>
<li><p><strong>dataset</strong> (<em>str</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Filters datasets and returns only the ones matching the filename.
Supports lists asterisks as wildcards.  May be a dict of ALF parts.</p></li>
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì Filters datasets and returns only the ones matching the revision.
Supports asterisks as wildcards.</p></li>
<li><p><strong>download_only</strong> (<em>bool</em>) ‚Äì When true the data are downloaded and the file path is returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset or a ALFPath object if download_only is true.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame, <a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath">one.alf.path.ALFPath</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>alferr.ALFObjectNotFound</strong> ‚Äì No datasets match the object, attribute or revision filters for this relation and
     identifier.
    Matching dataset was not found on disk (neither on the remote repository or locally).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Load a dataset aggregated over a specific subject‚Äôs sessions</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trials</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">load_aggregate</span><span class="p">(</span><span class="s1">&#39;subjects&#39;</span><span class="p">,</span> <span class="s1">&#39;SP026&#39;</span><span class="p">,</span> <span class="s1">&#39;_ibl_subjectTraining.table&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.pid2eid">
<span class="sig-name descname"><span class="pre">pid2eid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type=None)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'uuid.UUID'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'str'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.pid2eid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.pid2eid" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given an Alyx probe UUID string, return the session ID and probe label.</p>
<p>NB: Requires a connection to the Alyx database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pid</strong> (<em>str</em><em>, </em><em>UUID</em>) ‚Äì A probe UUID.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query mode - options include ‚Äòremote‚Äô, and ‚Äòrefresh‚Äô.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>uuid.UUID</em> ‚Äì Experiment ID (eid).</p></li>
<li><p><em>str</em> ‚Äì Probe label.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.eid2pid">
<span class="sig-name descname"><span class="pre">eid2pid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'uuid.UUID'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'str'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'list'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.eid2pid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.eid2pid" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given an experiment UUID (eID), return the probe IDs and labels (i.e. ALF collection).</p>
<p>NB: Requires a connection to the Alyx database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì Query mode - options include ‚Äòremote‚Äô, and ‚Äòrefresh‚Äô.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì Additionally return the complete Alyx records from insertions endpoint.</p></li>
<li><p><strong>kwargs</strong> ‚Äì Additional parameters to filter insertions Alyx endpoint.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of UUID</em> ‚Äì Probe UUIDs (pID).</p></li>
<li><p><em>list of str</em> ‚Äì Probe labels, e.g. ‚Äòprobe00‚Äô.</p></li>
<li><p><em>list of dict (optional)</em> ‚Äì If details is true, returns the Alyx records from insertions endpoint.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get the probe IDs and details for a given session ID</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pids</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">recs</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">eid2pid</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Get the probe ID for a given session ID and label</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pid</span><span class="p">,),</span> <span class="n">_</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">eid2pid</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;probe00&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.search_insertions">
<span class="sig-name descname"><span class="pre">search_insertions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.search_insertions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.search_insertions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Search insertions matching the given criteria and return a list of matching probe IDs.</p>
<p>For a list of search terms, use the method</p>
<blockquote>
<div><p>one.search_terms(query_type=‚Äôremote‚Äô, endpoint=‚Äôinsertions‚Äô)</p>
</div></blockquote>
<p>All of the search parameters, apart from dataset and dataset type require a single value.
For dataset and dataset type, a single value or a list can be provided. Insertions
returned will contain all listed datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>str</em>) ‚Äì A session eid, returns insertions associated with the session.</p></li>
<li><p><strong>name</strong> (<em>str</em>) ‚Äì An insertion label, returns insertions with specified name.</p></li>
<li><p><strong>lab</strong> (<em>str</em>) ‚Äì A lab name, returns insertions associated with the lab.</p></li>
<li><p><strong>subject</strong> (<em>str</em>) ‚Äì A subject nickname, returns insertions associated with the subject.</p></li>
<li><p><strong>task_protocol</strong> (<em>str</em>) ‚Äì A task protocol name (can be partial, i.e. any task protocol containing that str
will be found).</p></li>
<li><p><strong>project</strong><strong>(</strong><strong>s</strong><strong>)</strong> (<em>str</em>) ‚Äì The project name (can be partial, i.e. any task protocol containing that str
will be found).</p></li>
<li><p><strong>dataset</strong> (<em>str</em>) ‚Äì A (partial) dataset name. Returns sessions containing matching datasets.
A dataset matches if it contains the search string e.g. ‚Äòwheel.position‚Äô matches
‚Äò_ibl_wheel.position.npy‚Äô. C.f. <cite>datasets</cite> argument.</p></li>
<li><p><strong>datasets</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì One or more exact dataset names. Returns insertions containing all these datasets.</p></li>
<li><p><strong>dataset_qc_lte</strong> (<em>int</em><em>, </em><em>str</em><em>, </em><a class="reference internal" href="one.alf.spec.html#one.alf.spec.QC" title="one.alf.spec.QC"><em>one.alf.spec.QC</em></a>) ‚Äì The maximum QC value for associated datasets.</p></li>
<li><p><strong>dataset_types</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì One or more dataset_types (exact matching).</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true also returns a dict of dataset details.</p></li>
<li><p><strong>query_type</strong> (<em>str</em><em>, </em><em>None</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
<li><p><strong>limit</strong> (<em>int</em>) ‚Äì The number of results to fetch in one go (if pagination enabled on server).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of UUID</em> ‚Äì List of probe IDs (pids).</p></li>
<li><p><em>(list of dicts)</em> ‚Äì If details is True, also returns a list of dictionaries, each entry corresponding to a
matching insertion.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This method does not use the local cache and therefore can not work in ‚Äòlocal‚Äô mode.</p></li>
</ul>
<p class="rubric">Examples</p>
<p>List the insertions associated with a given data release</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;2022_Q2_IBL_et_al_RepeatedSite&#39;</span>
<span class="gp">... </span><span class="n">ins</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search_insertions</span><span class="p">(</span><span class="n">django</span><span class="o">=</span><span class="s1">&#39;datasets__tags__name,&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.search" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches sessions matching the given criteria and returns a list of matching eids.</p>
<p>For a list of search terms, use the method</p>
<blockquote>
<div><p>one.search_terms(query_type=‚Äôremote‚Äô)</p>
</div></blockquote>
<p>For all search parameters, a single value or list may be provided.  For <cite>dataset</cite>,
the sessions returned will contain all listed datasets.  For the other parameters,
the session must contain at least one of the entries.</p>
<p>For all but <cite>date_range</cite> and <cite>number</cite>, any field that contains the search string is
returned.  Wildcards are not permitted, however if wildcards property is True, regular
expressions may be used (see notes and examples).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datasets</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì One or more (exact) dataset names. Returns sessions containing all of these datasets.</p></li>
<li><p><strong>date_range</strong> (<em>str</em><em>, </em><em>list</em><em>, </em><em>datetime.datetime</em><em>, </em><em>datetime.date</em><em>, </em><em>pandas.timestamp</em>) ‚Äì A single date to search or a list of 2 dates that define the range (inclusive).  To
define only the upper or lower date bound, set the other element to None.</p></li>
<li><p><strong>lab</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì A str or list of lab names, returns sessions from any of these labs (can be partial,
i.e. any task protocol containing that str will be found).</p></li>
<li><p><strong>number</strong> (<em>str</em><em>, </em><em>int</em>) ‚Äì Number of session to be returned, i.e. number in sequence for a given date.</p></li>
<li><p><strong>subject</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì A list of subject nicknames, returns sessions for any of these subjects (can be
partial, i.e. any task protocol containing that str will be found).</p></li>
<li><p><strong>task_protocol</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The task protocol name (can be partial, i.e. any task protocol containing that str
will be found).</p></li>
<li><p><strong>project</strong><strong>(</strong><strong>s</strong><strong>)</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì The project name (can be partial, i.e. any task protocol containing that str
will be found).</p></li>
<li><p><strong>performance_gte</strong> (<em>performance_lte /</em>) ‚Äì Search only for sessions whose performance is less equal or greater equal than a
pre-defined threshold as a percentage (0-100).</p></li>
<li><p><strong>users</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì A list of users.</p></li>
<li><p><strong>location</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì A str or list of lab location (as per Alyx definition) name.
Note: this corresponds to the specific rig, not the lab geographical location per se.</p></li>
<li><p><strong>dataset_types</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì One or more of dataset_types. Unlike with <cite>datasets</cite>, the dataset types for the
sessions returned may not be reachable (i.e. for recent sessions the datasets may not
yet be available).</p></li>
<li><p><strong>dataset_qc_lte</strong> (<em>int</em><em>, </em><em>str</em><em>, </em><a class="reference internal" href="one.alf.spec.html#one.alf.spec.QC" title="one.alf.spec.QC"><em>one.alf.spec.QC</em></a>) ‚Äì The maximum QC value for associated datasets. NB: Without <cite>datasets</cite>, not all
associated datasets with the matching QC values are guarenteed to be reachable.</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If true also returns a dict of dataset details.</p></li>
<li><p><strong>query_type</strong> (<em>str</em><em>, </em><em>None</em>) ‚Äì Query cache (‚Äòlocal‚Äô) or Alyx database (‚Äòremote‚Äô).</p></li>
<li><p><strong>limit</strong> (<em>int</em>) ‚Äì The number of results to fetch in one go (if pagination enabled on server).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>list of UUID</em> ‚Äì List of eids.</p></li>
<li><p><em>(list of dicts)</em> ‚Äì If details is True, also returns a list of dictionaries, each entry corresponding to a
matching session.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Search for sessions with ‚Äòtraining‚Äô in the task protocol.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="s1">&#39;training&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for sessions by subject ‚ÄòMFD_04‚Äô.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;MFD_04&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do an exact search for sessions by subject ‚ÄòFD_04‚Äô.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">one</span><span class="o">.</span><span class="n">wildcards</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;the wildcards flag must be True for regex expressions&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s1">&#39;^FD_04$&#39;</span><span class="p">,</span> <span class="n">query_type</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Search for sessions on a given date, in a given lab, containing trials and spike data.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eids</span> <span class="o">=</span> <span class="n">one</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span> <span class="n">lab</span><span class="o">=</span><span class="s1">&#39;churchlandlab&#39;</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;trials&#39;</span><span class="p">,</span> <span class="s1">&#39;spikes&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>In default and local mode, most queries are case-sensitive partial matches. When lists
are provided, the search is a logical OR, except for <cite>datasets</cite>, which is a logical AND.</p></li>
<li><p>All search terms are true for a session to be returned, i.e. subject matches AND project
matches, etc.</p></li>
<li><p>In remote mode most queries are case-insensitive partial matches.</p></li>
<li><p>In default and local mode, when the one.wildcards flag is True (default), queries are
interpreted as regular expressions. To turn this off set one.wildcards to False.</p></li>
<li><p>In remote mode regular expressions are only supported using the <cite>django</cite> argument.</p></li>
<li><p>In remote mode, only the <cite>datasets</cite> argument returns sessions where datasets are
registered <em>and</em> exist. Using <cite>dataset_types</cite> or <cite>dataset_qc_lte</cite> without <cite>datasets</cite>
will not check that the datasets are reachable.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.setup">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.setup" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up OneAlyx for a given database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_url</strong> (<em>str</em>) ‚Äì An Alyx database URL.  If None, the current default database is used.</p></li>
<li><p><strong>kwargs</strong> ‚Äì Optional arguments to pass to one.params.setup.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of OneAlyx for the newly set up database URL</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#one.api.OneAlyx" title="one.api.OneAlyx">OneAlyx</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="one.params.html#one.params.setup" title="one.params.setup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">one.params.setup</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.eid2path">
<span class="sig-name descname"><span class="pre">eid2path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath"><span class="pre">ALFPath</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath"><span class="pre">ALFPath</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.eid2path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.eid2path" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>From an experiment ID gets the local session path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì If set to ‚Äòremote‚Äô, will force database connection.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A session path or list of session paths.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="one.alf.path.html#one.alf.path.ALFPath" title="one.alf.path.ALFPath">one.alf.path.ALFPath</a>, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.path2eid">
<span class="sig-name descname"><span class="pre">path2eid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.path2eid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.path2eid" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>From a local path, gets the experiment ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_obj</strong> (<em>str</em><em>, </em><em>pathlib.Path</em><em>, </em><em>list</em>) ‚Äì Local path or list of local paths.</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì If set to ‚Äòremote‚Äô, will force database connection.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An eid or list of eids.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>UUID, list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.path2url">
<span class="sig-name descname"><span class="pre">path2url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.path2url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.path2url" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Given a local file path, returns the URL of the remote file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em><em>, </em><em>pathlib.Path</em>) ‚Äì A local file path</p></li>
<li><p><strong>query_type</strong> (<em>str</em>) ‚Äì If set to ‚Äòremote‚Äô, will force database connection</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A URL string</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.type2datasets">
<span class="sig-name descname"><span class="pre">type2datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">details</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.type2datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.type2datasets" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get list of datasets belonging to a given dataset type for a given session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>dataset_type</strong> (<em>str</em><em>, </em><em>list</em>) ‚Äì An Alyx dataset type, e.g. camera.times or a list of dtypes</p></li>
<li><p><strong>details</strong> (<em>bool</em>) ‚Äì If True, a datasets DataFrame is returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A numpy array of data, or DataFrame if details is true</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.dataset2type">
<span class="sig-name descname"><span class="pre">dataset2type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dset</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.dataset2type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.dataset2type" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return dataset type from dataset.</p>
<p>NB: Requires an Alyx database connection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dset</strong> (<em>str</em><em>, </em><em>np.ndarray</em><em>, </em><em>tuple</em>) ‚Äì A dataset name, dataset uuid or dataset integer id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The dataset type</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.describe_revision">
<span class="sig-name descname"><span class="pre">describe_revision</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">revision</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.describe_revision"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.describe_revision" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Print description of a revision.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>revision</strong> (<em>str</em>) ‚Äì The name of the revision (without ‚Äò#‚Äô)</p></li>
<li><p><strong>full</strong> (<em>bool</em>) ‚Äì If true, returns the matching record</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None if full is false or no record found, otherwise returns record as dict</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.api.OneAlyx.get_details">
<span class="sig-name descname"><span class="pre">get_details</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">eid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/api.html#OneAlyx.get_details"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.api.OneAlyx.get_details" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return session details for a given session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eid</strong> (<em>str</em><em>, </em><em>UUID</em><em>, </em><em>pathlib.Path</em><em>, </em><em>dict</em><em>, </em><em>list</em>) ‚Äì Experiment session identifier; may be a UUID, URL, experiment reference string
details dict or Path.</p></li>
<li><p><strong>full</strong> (<em>bool</em>) ‚Äì If True, returns a DataFrame of session and dataset info.</p></li>
<li><p><strong>query_type</strong> (<em>{'local'</em><em>, </em><em>'remote'}</em>) ‚Äì The query mode - if ‚Äòlocal‚Äô the details are taken from the cache tables; if ‚Äòremote‚Äô
the details are returned from the sessions REST endpoint.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>in local mode - a session record or full DataFrame with dataset information if full is
True; in remote mode - a full or partial session dict.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.Series, pd.DataFrame, dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> ‚Äì Invalid experiment ID (failed to parse into eid string).</p></li>
<li><p><strong>requests.exceptions.HTTPError</strong> ‚Äì [Errno 404] Remote session not found on Alyx.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="one.alf.spec.FULL_SPEC.html" class="btn btn-neutral float-left" title="one.alf.spec.FULL_SPEC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="one.api.SAVE_ON_DELETE.html" class="btn btn-neutral float-right" title="one.api.SAVE_ON_DELETE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, International Brain Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>