<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>one.remote.globus &mdash; ONE  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="one.remote.globus.CLIENT_KEY" href="one.remote.globus.CLIENT_KEY.html" />
    <link rel="prev" title="one.remote.base.ALYX_JSON" href="one.remote.base.ALYX_JSON.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ONE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using ONE to access data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../one_reference.html">Introduction to ONE (Open Neurophysiology Environment)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../one_installation.html">ONE installation and setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_quickstart.html">ONE Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_search/one_search.html">Searching with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_list/one_list.html">Listing with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_load/one_load.html">Loading with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/experiment_ids.html">Experiment IDs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE with Alyx</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_modes.html">ONE API modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/one_advanced/one_advanced.html">ONE REST queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/useful_alyx_queries.html">Useful Alyx REST queries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using ONE to share data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/data_sharing.html">Releasing data with ONE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/recording_data_access.html">Recording data access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ALF</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../alf_intro.html">ALyx Filenames (ALF)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/alyx_files.html">Listing Alyx Filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/datasets_and_types.html">Datasets and their types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="one.html">one</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="one.alf.html">one.alf</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.api.html">one.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.converters.html">one.converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.params.html">one.params</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.registration.html">one.registration</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="one.remote.html">one.remote</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="one.remote.aws.html">one.remote.aws</a></li>
<li class="toctree-l4"><a class="reference internal" href="one.remote.base.html">one.remote.base</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">one.remote.globus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="one.tests.html">one.tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.util.html">one.util</a></li>
<li class="toctree-l3"><a class="reference internal" href="one.webclient.html">one.webclient</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ONE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api_reference.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="one.html">one</a></li>
          <li class="breadcrumb-item"><a href="one.remote.html">one.remote</a></li>
      <li class="breadcrumb-item active">one.remote.globus</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/one.remote.globus.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-one.remote.globus">
<span id="one-remote-globus"></span><h1>one.remote.globus<a class="headerlink" href="#module-one.remote.globus" title="Link to this heading"></a></h1>
<p>A module for handling file operations through the Globus SDK.</p>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Link to this heading"></a></h2>
<p>To set up Globus simply instantiate the <cite>Globus</cite> class for the first time and follow the prompts.
Providing a client name string to the constructor allows one to set up multiple Globus clients
(i.e. when switching between different Globus client IDs).</p>
<p>In order to use this function you need:</p>
<ol class="arabic simple">
<li><p>The client ID of an existing Globus Client (<a href="#id6"><span class="problematic" id="id7">`see this tutorial`_</span></a>).</p></li>
<li><p>Set up <a class="reference external" href="https://www.globus.org/globus-connect-personal">Global Connect</a> on your local device.</p></li>
<li><p>Register your local device as an <a class="reference external" href="https://app.globus.org/">endpoint</a> in your Globus Client.</p></li>
</ol>
<p>To modify the settings for a pre-established client, call the <cite>Globus.setup</cite> method with the client
name:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">globus</span> <span class="o">=</span> <span class="n">Globus</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can update the list of endpoints using the <cite>fetch_endpoints_from_alyx</cite> method:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">globus</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remote_endpoints</span> <span class="o">=</span> <span class="n">globus</span><span class="o">.</span><span class="n">fetch_endpoints_from_alyx</span><span class="p">(</span><span class="n">alyx</span><span class="o">=</span><span class="n">AlyxClient</span><span class="p">())</span>
</pre></div>
</div>
<p>The endpoints are stored in the <cite>endpoints</cite> property</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">globus</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">globus</span><span class="o">.</span><span class="n">endpoints</span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<p>Get the full Globus file path</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">relative_path</span> <span class="o">=</span> <span class="s1">&#39;subject/2020-01-01/001/alf/_ibl_trials.table.pqt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full_path</span> <span class="o">=</span> <span class="n">globus</span><span class="o">.</span><span class="n">to_address</span><span class="p">(</span><span class="n">relative_path</span><span class="p">,</span> <span class="s1">&#39;flatiron_cortexlab&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Log in with a limited time token</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">globus</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">globus</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">stay_logged_in</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Log out of Globus, revoking and deleting all tokens</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">globus</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">globus</span><span class="o">.</span><span class="n">is_logged_in</span>
</pre></div>
</div>
<p>Asynchronously transfer data between Alyx repositories</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alyx</span> <span class="o">=</span> <span class="n">AlyxClient</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">add_endpoint</span><span class="p">(</span><span class="s1">&#39;flatiron_cortexlab&#39;</span><span class="p">,</span> <span class="n">alyx</span><span class="o">=</span><span class="n">alyx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">add_endpoint</span><span class="p">(</span><span class="s1">&#39;cortex_lab_SR&#39;</span><span class="p">,</span> <span class="n">alyx</span><span class="o">=</span><span class="n">alyx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">transfer_data</span><span class="p">(</span><span class="s1">&#39;path/to/file&#39;</span><span class="p">,</span> <span class="s1">&#39;flatiron_cortexlab&#39;</span><span class="p">,</span> <span class="s1">&#39;cortex_lab_SR&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Synchronously transfer data to an alternate local location</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root_path</span> <span class="o">=</span> <span class="s1">&#39;/path/to/new/location&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">add_endpoint</span><span class="p">(</span><span class="n">get_local_endpoint_id</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;alternate_local&#39;</span><span class="p">,</span> <span class="n">root_path</span><span class="o">=</span><span class="n">root_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">folder</span> <span class="o">=</span> <span class="s1">&#39;camera/ZFM-01867/2021-03-23/002&#39;</span>  <span class="c1"># An example folder to download</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">glo</span><span class="o">.</span><span class="n">transfer_data</span><span class="p">,</span> <span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;integration&#39;</span><span class="p">,</span> <span class="s1">&#39;integration_local&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;alternate data&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">run_task</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>  <span class="c1"># Submit task to Globus and await completion</span>
</pre></div>
</div>
<p>Temporarily change local data root path and synchronously download file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">endpoints</span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">][</span><span class="s1">&#39;root_path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/path/to/new/location&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s1">&#39;path/to/file.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;source_endpoint&#39;</span><span class="p">)</span>
<span class="go">Path(&#39;/path/to/new/location/path/to/file.ext&#39;)</span>
</pre></div>
</div>
<p>Await multiple tasks to complete by passing a list of Globus tranfer IDs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">globus</span><span class="o">.</span><span class="n">task_wait_async</span><span class="p">(</span><span class="n">task_id</span><span class="p">)))</span> <span class="k">for</span> <span class="n">task_id</span> <span class="ow">in</span> <span class="n">task_ids</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">))</span>
</pre></div>
</div>
</section>
<p class="rubric">Module attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="one.remote.globus.CLIENT_KEY.html#one.remote.globus.CLIENT_KEY" title="one.remote.globus.CLIENT_KEY"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CLIENT_KEY</span></code></a></p></td>
<td><p>The default key in the remote settings file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="one.remote.globus.DEFAULT_PAR.html#one.remote.globus.DEFAULT_PAR" title="one.remote.globus.DEFAULT_PAR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DEFAULT_PAR</span></code></a></p></td>
<td><p>The default Globus parameter fields</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="one.remote.globus.STATUS_MAP.html#one.remote.globus.STATUS_MAP" title="one.remote.globus.STATUS_MAP"><code class="xref py py-obj docutils literal notranslate"><span class="pre">STATUS_MAP</span></code></a></p></td>
<td><p>A map of Globus status to &quot;nice&quot; status</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.remote.globus.as_globus_path" title="one.remote.globus.as_globus_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_globus_path</span></code></a></p></td>
<td><p>Convert a path into one suitable for the Globus TransferClient.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_globus_client</span></code></p></td>
<td><p>Creates a Globus transfer client based on existing parameter file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">ensure_logged_in</span></code></p></td>
<td><p>Decorator for the Globus methods.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#one.remote.globus.get_lab_from_endpoint_id" title="one.remote.globus.get_lab_from_endpoint_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lab_from_endpoint_id</span></code></a></p></td>
<td><p>Extracts lab names associated with a given an endpoint UUID.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_local_endpoint_id</span></code></p></td>
<td><p>Extracts the ID of the local Globus Connect endpoint.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_local_endpoint_paths</span></code></p></td>
<td><p>Extracts the local endpoint paths accessible by Globus Connect.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_token</span></code></p></td>
<td><p>Get a Globus authentication token.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#one.remote.globus.Globus" title="one.remote.globus.Globus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Globus</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="one.remote.globus.Globus">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Globus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="one.remote.base.html#one.remote.base.DownloadClient" title="one.remote.base.DownloadClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">DownloadClient</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="one.remote.globus.Globus.is_logged_in">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_logged_in</span></span><a class="headerlink" href="#one.remote.globus.Globus.is_logged_in" title="Link to this definition"></a></dt>
<dd><p>Check if client exists and is authenticated</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.login">
<span class="sig-name descname"><span class="pre">login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stay_logged_in</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.login"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.login" title="Link to this definition"></a></dt>
<dd><p>Authenticate Globus client.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stay_logged_in</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, use refresh token to remain logged in for longer.  If False, use an auth
token without the option of refreshing when expired. If not specified, uses the refresh
token if available.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.logout">
<span class="sig-name descname"><span class="pre">logout</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.logout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.logout" title="Link to this definition"></a></dt>
<dd><p>Revoke any tokens and delete them from the client and parameter file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.fetch_endpoints_from_alyx">
<span class="sig-name descname"><span class="pre">fetch_endpoints_from_alyx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alyx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.fetch_endpoints_from_alyx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.fetch_endpoints_from_alyx" title="Link to this definition"></a></dt>
<dd><p>Update endpoints property with Alyx Globus data repositories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alyx</strong> (<a class="reference internal" href="one.webclient.html#one.webclient.AlyxClient" title="one.webclient.AlyxClient"><em>one.webclient.AlyxClient</em></a>) – An optional AlyxClient.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – Whether existing endpoint with the same label should be replaced.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The endpoints added from Alyx.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.to_address">
<span class="sig-name descname"><span class="pre">to_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.to_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.to_address" title="Link to this definition"></a></dt>
<dd><p>Get full path for a given endpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<em>Path</em><em>, </em><em>PurePath</em><em>, </em><em>str</em>) – An absolute or relative POSIX path</p></li>
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – An endpoint label or UUID.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A complete path string formatted for Globus.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">add_endpoint</span><span class="p">(</span><span class="s1">&#39;0ec47586-3a19-11eb-b173-0ee0d5d9299f&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;foobar&#39;</span><span class="p">,</span> <span class="n">root_path</span><span class="o">=</span><span class="s1">&#39;/foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span><span class="o">.</span><span class="n">to_address</span><span class="p">(</span><span class="s1">&#39;bar/baz.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;foobar&#39;</span><span class="p">)</span>
<span class="go">&#39;/foo/bar/baz.ext&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.download_file">
<span class="sig-name descname"><span class="pre">download_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.download_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.download_file" title="Link to this definition"></a></dt>
<dd><p>Download one or more files via Globus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_address</strong> (<em>str</em><em>, </em><em>list</em><em> of </em><em>str</em>) – One or more relative POSIX paths to download.</p></li>
<li><p><strong>source_endpoint</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – The source endpoint name or uuid.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – If true, transfer the contents of nested directories (NB: all data_paths must be
directories).</p></li>
<li><p><strong>**kwargs</strong> – See Globus.transfer_data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The downloaded file path(s). If recursive is True, a list is always returned.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pathlib.Path, list of pathlib.Path</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Assumes that the local endpoint root path is NOT POSIX style on Windows.</p></li>
</ul>
<p>TODO Return None for failed files</p>
<p class="rubric">Examples</p>
<p>Download a single file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">file</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s1">&#39;path/to/file&#39;</span><span class="p">,</span> <span class="s1">&#39;0ec47586-3a19-11eb-b173-0ee0d5d9299f&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Download multiple files and verify checksum</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;relative/file/path.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s1">&#39;source_endpoint_name&#39;</span><span class="p">,</span> <span class="n">verify_checksum</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Download a folder</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="s1">&#39;folder/path&#39;</span><span class="p">,</span> <span class="s1">&#39;source_endpoint_name&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.setup">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.setup" title="Link to this definition"></a></dt>
<dd><p>Setup a Globus client.</p>
<p>In order to use this function you need:</p>
<ol class="arabic simple">
<li><p>The client ID of an existing Globus Client (<a href="#id8"><span class="problematic" id="id9">`see this tutorial`_</span></a>).</p></li>
<li><p>Set up <a class="reference external" href="https://www.globus.org/globus-connect-personal">Global Connect</a> on your local device.</p></li>
<li><p>Register your local device as an <a class="reference external" href="https://app.globus.org/">endpoint</a> in your Globus Client.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_name</strong> (<em>str</em>) – Parameter profile name to set up e.g. ‘default’, ‘admin’.</p></li>
<li><p><strong>**kwargs</strong> – Optional Globus constructor arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new Globus client object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#one.remote.globus.Globus" title="one.remote.globus.Globus">Globus</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.add_endpoint">
<span class="sig-name descname"><span class="pre">add_endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alyx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.add_endpoint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.add_endpoint" title="Link to this definition"></a></dt>
<dd><p>Add an endpoint to the Globus instance to be used by other functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) – The endpoint UUID or database repository name of the endpoint.</p></li>
<li><p><strong>label</strong> (<em>str</em>) – Label to access the endpoint. If endpoint is UUID this has to be set, otherwise is
optional.</p></li>
<li><p><strong>root_path</strong> (<em>str</em><em>, </em><em>pathlib.Path</em><em>, </em><em>pathlib.PurePath</em>) – File path to be accessed by Globus on the endpoint.</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – Whether existing endpoint with the same label should be replaced.</p></li>
<li><p><strong>alyx</strong> (<a class="reference internal" href="one.webclient.html#one.webclient.AlyxClient" title="one.webclient.AlyxClient"><em>one.webclient.AlyxClient</em></a>) – An AlyxClient instance for looking up repository information.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.transfer_data">
<span class="sig-name descname"><span class="pre">transfer_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destination_endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.transfer_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.transfer_data" title="Link to this definition"></a></dt>
<dd><p>Transfer one or more paths between endpoints.</p>
<p>At least one of the endpoints must be a server endpoint.  Both file and directory paths may
be provided, however if recursive is true, all paths must be directories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<em>str</em><em>, </em><em>list</em><em> of </em><em>str</em>) – One or more data paths, relative to the endpoint root path.</p></li>
<li><p><strong>source_endpoint</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – The name or UUID of the source endpoint.</p></li>
<li><p><strong>destination_endpoint</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – The name or UUID of the destination endpoint.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – If true, transfer the contents of nested directories (NB: all data_paths must be
directories).</p></li>
<li><p><strong>**kwargs</strong> – See globus_sdk.TransferData.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Globus transfer ID.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid.UUID</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Transfer two files (asynchronous)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;file.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">transfer_data</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s1">&#39;source_endpoint&#39;</span><span class="p">,</span> <span class="s1">&#39;destination_endpoint&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Transfer a file (synchronous)
&gt;&gt;&gt; file = ‘file.ext’
&gt;&gt;&gt; task_id = glo.run_task(lambda: glo.transfer_data(file, ‘src_endpoint’, ‘dst_endpoint’))</p>
<p>Transfer a folder (asynchronous)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">folder</span> <span class="o">=</span> <span class="s1">&#39;path/to/folder&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">transfer_data</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;source_endpoint&#39;</span><span class="p">,</span> <span class="s1">&#39;destination_endpoint&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.delete_data">
<span class="sig-name descname"><span class="pre">delete_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.delete_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.delete_data" title="Link to this definition"></a></dt>
<dd><p>Delete one or more paths within an endpoint.</p>
<p>Both file and directory paths may be provided, however if recursive is true, all paths must
be directories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> (<em>str</em><em>, </em><em>list</em><em> of </em><em>str</em>) – One or more data paths, relative to the endpoint root path.</p></li>
<li><p><strong>endpoint</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – The name or UUID of the endpoint.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – If true, delete the contents of nested directories (NB: all data_paths must be
directories).</p></li>
<li><p><strong>**kwargs</strong> – See globus_sdk.DeleteData.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Globus transfer ID.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid.UUID</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Delete two files, ingnoring those that don’t exist (asynchronous)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glo</span> <span class="o">=</span> <span class="n">Globus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;file.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;foo.bar&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">delete_data</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="s1">&#39;endpoint_name&#39;</span><span class="p">,</span> <span class="n">ignore_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Delete a file (synchronous)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">run_task</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">glo</span><span class="o">.</span><span class="n">delete_data</span><span class="p">(</span><span class="s1">&#39;file.ext&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Recursively delete a folder (asynchronous)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">folder</span> <span class="o">=</span> <span class="s1">&#39;path/to/folder&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_id</span> <span class="o">=</span> <span class="n">glo</span><span class="o">.</span><span class="n">delete_data</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s1">&#39;endpoint_name&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.ls">
<span class="sig-name descname"><span class="pre">ls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_uuid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.ls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.ls" title="Link to this definition"></a></dt>
<dd><p>Return the list of (filename, filesize) in a given endpoint directory.
NB: If you’re using ls routinely when transferring or deleting files you’re probably doing
something wrong!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) – The Globus endpoint. May be a UUID or a key in the Globus.endpoints attribute.</p></li>
<li><p><strong>path</strong> (<em>Path</em><em>, </em><em>PurePath</em><em>, </em><em>str</em>) – The absolute or relative Globus path to list.  Note: if endpoint is a UUID, the path
must be absolute.</p></li>
<li><p><strong>remove_uuid</strong> (<em>bool</em>) – If True, remove the UUID from the returned filenames.</p></li>
<li><p><strong>return_size</strong> (<em>bool</em>) – If True, return the size of each listed file in bytes.</p></li>
<li><p><strong>max_retries</strong> (<em>int</em>) – The number of times to retry the remote operation before raising. Increasing this may
mitigate unstable network issues.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of PurePosixPath objects of the files and folders listed, or if return_size is
True, tuples of PurePosixPath objects and the corresponding file sizes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.mv">
<span class="sig-name descname"><span class="pre">mv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_endpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.mv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.mv" title="Link to this definition"></a></dt>
<dd><p>Move files from one endpoint to another.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_endpoint</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) – The Globus source endpoint. May be a UUID or a key in the Globus.endpoints attribute.</p></li>
<li><p><strong>target_endpoint</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) – The Globus destination endpoint. May be a UUID or a key in the Globus.endpoints
attribute.</p></li>
<li><p><strong>source_paths</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>pathlib.Path</em><em> or </em><em>pathlib.PurePath</em>) – The absolute or relative Globus paths of source files to moves.  Note: if endpoint is
a UUID, the path must be absolute.</p></li>
<li><p><strong>target_paths</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>Path</em><em> or </em><em>PurePath</em>) – The absolute or relative Globus paths of destination files to moves.  Note: if endpoint
is a UUID, the path must be absolute.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Maximum time in seconds to wait for the task to complete.</p></li>
<li><p><strong>**kwargs</strong> – Optional arguments for globus_sdk.TransferData.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A Globus task ID.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid.UUID</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.run_task">
<span class="sig-name descname"><span class="pre">run_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">globus_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.run_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.run_task" title="Link to this definition"></a></dt>
<dd><p>Block until a Globus task finishes and retry upon Network or REST Errors.
globus_func needs to submit a task to the client and return a task_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>globus_func</strong> (<em>function</em><em>, </em><em>Callable</em>) – A function that returns a Globus task ID, typically it will submit a transfer.</p></li>
<li><p><strong>retries</strong> (<em>int</em>) – The number of times to call globus_func if it raises a Globus error.</p></li>
<li><p><strong>timeout</strong> (<em>int</em>) – Maximum time in seconds to wait for the task to complete.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Globus task ID.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>uuid.UUID</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IOError</strong> – Timed out waiting for task to complete.</p></li>
<li><p><strong>TODO Add a quick fail option that returns when files missing</strong><strong>, </strong><strong>etc.</strong> – </p></li>
<li><p><strong>TODO Add status logging</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="one.remote.globus.Globus.task_wait_async">
<span class="sig-name descname"><span class="pre">task_wait_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polling_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#Globus.task_wait_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.Globus.task_wait_async" title="Link to this definition"></a></dt>
<dd><p>Asynchronously wait until a Task is complete or fails, with a time limit.</p>
<p>If the task status is ACTIVE after timout, returns False, otherwise returns True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<em>str</em><em>, </em><em>uuid.UUID</em>) – A Globus task UUID to wait on for completion.</p></li>
<li><p><strong>polling_interval</strong> (<em>float</em>) – Number of seconds between queries to Globus about the task status. Minimum 1 second.</p></li>
<li><p><strong>timeout</strong> (<em>float</em>) – Number of seconds to wait in total. Minimum 1 second.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if status not ACTIVE before timeout. False if status still ACTIVE at timeout.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Asynchronously await a task to complete</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">Globus</span><span class="p">()</span><span class="o">.</span><span class="n">task_wait_async</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="one.remote.globus.get_lab_from_endpoint_id">
<span class="sig-name descname"><span class="pre">get_lab_from_endpoint_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alyx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#get_lab_from_endpoint_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.get_lab_from_endpoint_id" title="Link to this definition"></a></dt>
<dd><p>Extracts lab names associated with a given an endpoint UUID.</p>
<p>Finds the lab names that are associated to data repositories with the provided Globus endpoint
UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint</strong> (<em>uuid.UUID</em><em>, </em><em>str</em>) – Endpoint UUID, optional if not given will get attempt to find local endpoint UUID.</p></li>
<li><p><strong>alyx</strong> (<a class="reference internal" href="one.webclient.html#one.webclient.AlyxClient" title="one.webclient.AlyxClient"><em>one.webclient.AlyxClient</em></a>) – An instance of AlyxClient to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The lab names associated with the endpoint UUID.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="one.remote.globus.as_globus_path">
<span class="sig-name descname"><span class="pre">as_globus_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/one/remote/globus.html#as_globus_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#one.remote.globus.as_globus_path" title="Link to this definition"></a></dt>
<dd><p>Convert a path into one suitable for the Globus TransferClient.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>pathlib.Path</em><em>, </em><em>pathlib.PurePath</em><em>, </em><em>str</em>) – A path to convert to a Globus-complient path string.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A formatted path string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>If using tilda in path, the home folder of your Globus Connect instance must be the same as
the OS home dir.</p></li>
<li><p>If validating a path for another system ensure the input path is a PurePath, in particular,
on a Linux computer a remote Windows should first be made into a PureWindowsPath.</p></li>
</ul>
<p class="rubric">Examples</p>
<p>A Windows path (on Windows OS)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_globus_path</span><span class="p">(</span><span class="s1">&#39;E:\FlatIron\integration&#39;</span><span class="p">)</span>
<span class="go">&#39;/E/FlatIron/integration&#39;</span>
</pre></div>
</div>
<p>When explicitly a POSIX path, remains unchanged</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_globus_path</span><span class="p">(</span><span class="n">PurePosixPath</span><span class="p">(</span><span class="s1">&#39;E:\FlatIron\integration&#39;</span><span class="p">))</span>
<span class="go">&#39;E:\FlatIron\integration&#39;</span>
</pre></div>
</div>
<p>A relative POSIX path (on <a href="#id4"><span class="problematic" id="id5">*</span></a>nix OS)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_globus_path</span><span class="p">(</span><span class="s1">&#39;../data/integration&#39;</span><span class="p">)</span>
<span class="go">&#39;/mnt/data/integration&#39;</span>
</pre></div>
</div>
<p>A valid Globus path remains unchanged</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_globus_path</span><span class="p">(</span><span class="s1">&#39;/E/FlatIron/integration&#39;</span><span class="p">)</span>
<span class="go">&#39;/E/FlatIron/integration&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="one.remote.base.ALYX_JSON.html" class="btn btn-neutral float-left" title="one.remote.base.ALYX_JSON" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="one.remote.globus.CLIENT_KEY.html" class="btn btn-neutral float-right" title="one.remote.globus.CLIENT_KEY" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, International Brain Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>